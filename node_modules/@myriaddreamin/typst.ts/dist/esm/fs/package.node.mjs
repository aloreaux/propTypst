import { FetchPackageRegistry } from './package.mjs';
// const escapeImport = new Function('m', 'return import(m)');
// const { default: request } = await escapeImport('sync-request-curl');
export class NodeFetchPackageRegistry extends FetchPackageRegistry {
    request;
    constructor(am, request) {
        super(am);
        this.request = request;
    }
    pullPackageData(path) {
        const response = this.request('GET', this.resolvePath(path));
        if (response.statusCode === 200) {
            return response.getBody(undefined);
        }
        return undefined;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFja2FnZS5ub2RlLm1qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9mcy9wYWNrYWdlLm5vZGUubXRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUdyRCw4REFBOEQ7QUFDOUQsd0VBQXdFO0FBRXhFLE1BQU0sT0FBTyx3QkFBeUIsU0FBUSxvQkFBb0I7SUFHdEQ7SUFGVixZQUNFLEVBQXVCLEVBQ2YsT0FBWTtRQUVwQixLQUFLLENBQUMsRUFBRSxDQUFDLENBQUM7UUFGRixZQUFPLEdBQVAsT0FBTyxDQUFLO0lBR3RCLENBQUM7SUFFRCxlQUFlLENBQUMsSUFBaUI7UUFDL0IsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBRTdELElBQUksUUFBUSxDQUFDLFVBQVUsS0FBSyxHQUFHLEVBQUU7WUFDL0IsT0FBTyxRQUFRLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1NBQ3BDO1FBQ0QsT0FBTyxTQUFTLENBQUM7SUFDbkIsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBQYWNrYWdlU3BlYyB9IGZyb20gJy4uL2ludGVybmFsLnR5cGVzLm1qcyc7XHJcbmltcG9ydCB7IEZldGNoUGFja2FnZVJlZ2lzdHJ5IH0gZnJvbSAnLi9wYWNrYWdlLm1qcyc7XHJcbmltcG9ydCB0eXBlIHsgV3JpdGFibGVBY2Nlc3NNb2RlbCB9IGZyb20gJy4vaW5kZXgubWpzJztcclxuXHJcbi8vIGNvbnN0IGVzY2FwZUltcG9ydCA9IG5ldyBGdW5jdGlvbignbScsICdyZXR1cm4gaW1wb3J0KG0pJyk7XHJcbi8vIGNvbnN0IHsgZGVmYXVsdDogcmVxdWVzdCB9ID0gYXdhaXQgZXNjYXBlSW1wb3J0KCdzeW5jLXJlcXVlc3QtY3VybCcpO1xyXG5cclxuZXhwb3J0IGNsYXNzIE5vZGVGZXRjaFBhY2thZ2VSZWdpc3RyeSBleHRlbmRzIEZldGNoUGFja2FnZVJlZ2lzdHJ5IHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGFtOiBXcml0YWJsZUFjY2Vzc01vZGVsLFxyXG4gICAgcHJpdmF0ZSByZXF1ZXN0OiBhbnksXHJcbiAgKSB7XHJcbiAgICBzdXBlcihhbSk7XHJcbiAgfVxyXG5cclxuICBwdWxsUGFja2FnZURhdGEocGF0aDogUGFja2FnZVNwZWMpOiBVaW50OEFycmF5IHwgdW5kZWZpbmVkIHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gdGhpcy5yZXF1ZXN0KCdHRVQnLCB0aGlzLnJlc29sdmVQYXRoKHBhdGgpKTtcclxuXHJcbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzQ29kZSA9PT0gMjAwKSB7XHJcbiAgICAgIHJldHVybiByZXNwb25zZS5nZXRCb2R5KHVuZGVmaW5lZCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gIH1cclxufVxyXG4iXX0=