"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.NodeFetchPackageRegistry = void 0;
const package_mjs_1 = require("./package.cjs");
// const escapeImport = new Function('m', 'return import(m)');
// const { default: request } = await escapeImport('sync-request-curl');
class NodeFetchPackageRegistry extends package_mjs_1.FetchPackageRegistry {
    request;
    constructor(am, request) {
        super(am);
        this.request = request;
    }
    pullPackageData(path) {
        const response = this.request('GET', this.resolvePath(path));
        if (response.statusCode === 200) {
            return response.getBody(undefined);
        }
        return undefined;
    }
}
exports.NodeFetchPackageRegistry = NodeFetchPackageRegistry;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFja2FnZS5ub2RlLm1qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9mcy9wYWNrYWdlLm5vZGUubXRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUNBLCtDQUFxRDtBQUdyRCw4REFBOEQ7QUFDOUQsd0VBQXdFO0FBRXhFLE1BQWEsd0JBQXlCLFNBQVEsa0NBQW9CO0lBR3REO0lBRlYsWUFDRSxFQUF1QixFQUNmLE9BQVk7UUFFcEIsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBRkYsWUFBTyxHQUFQLE9BQU8sQ0FBSztJQUd0QixDQUFDO0lBRUQsZUFBZSxDQUFDLElBQWlCO1FBQy9CLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUU3RCxJQUFJLFFBQVEsQ0FBQyxVQUFVLEtBQUssR0FBRyxFQUFFO1lBQy9CLE9BQU8sUUFBUSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQztTQUNwQztRQUNELE9BQU8sU0FBUyxDQUFDO0lBQ25CLENBQUM7Q0FDRjtBQWhCRCw0REFnQkMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IFBhY2thZ2VTcGVjIH0gZnJvbSAnLi4vaW50ZXJuYWwudHlwZXMubWpzJztcclxuaW1wb3J0IHsgRmV0Y2hQYWNrYWdlUmVnaXN0cnkgfSBmcm9tICcuL3BhY2thZ2UubWpzJztcclxuaW1wb3J0IHR5cGUgeyBXcml0YWJsZUFjY2Vzc01vZGVsIH0gZnJvbSAnLi9pbmRleC5tanMnO1xyXG5cclxuLy8gY29uc3QgZXNjYXBlSW1wb3J0ID0gbmV3IEZ1bmN0aW9uKCdtJywgJ3JldHVybiBpbXBvcnQobSknKTtcclxuLy8gY29uc3QgeyBkZWZhdWx0OiByZXF1ZXN0IH0gPSBhd2FpdCBlc2NhcGVJbXBvcnQoJ3N5bmMtcmVxdWVzdC1jdXJsJyk7XHJcblxyXG5leHBvcnQgY2xhc3MgTm9kZUZldGNoUGFja2FnZVJlZ2lzdHJ5IGV4dGVuZHMgRmV0Y2hQYWNrYWdlUmVnaXN0cnkge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgYW06IFdyaXRhYmxlQWNjZXNzTW9kZWwsXHJcbiAgICBwcml2YXRlIHJlcXVlc3Q6IGFueSxcclxuICApIHtcclxuICAgIHN1cGVyKGFtKTtcclxuICB9XHJcblxyXG4gIHB1bGxQYWNrYWdlRGF0YShwYXRoOiBQYWNrYWdlU3BlYyk6IFVpbnQ4QXJyYXkgfCB1bmRlZmluZWQge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSB0aGlzLnJlcXVlc3QoJ0dFVCcsIHRoaXMucmVzb2x2ZVBhdGgocGF0aCkpO1xyXG5cclxuICAgIGlmIChyZXNwb25zZS5zdGF0dXNDb2RlID09PSAyMDApIHtcclxuICAgICAgcmV0dXJuIHJlc3BvbnNlLmdldEJvZHkodW5kZWZpbmVkKTtcclxuICAgIH1cclxuICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgfVxyXG59XHJcbiJdfQ==