/*
THIS IS A GENERATED/BUNDLED FILE BY VITE
if you want to view the source, please visit the github repository https://github.com/Myriad-Dreamin/typst.ts/blob/main/packages/typst.ts
*/
"use strict";var Oe=Object.defineProperty;var Le=(n,t,e)=>t in n?Oe(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var h=(n,t,e)=>Le(n,typeof t!="symbol"?t+"":t,e);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});var X=typeof document<"u"?document.currentScript:null;const De=["LinLibertine_R.ttf","LinLibertine_RB.ttf","LinLibertine_RBI.ttf","LinLibertine_RI.ttf","NewCMMath-Book.otf","NewCMMath-Regular.otf","NewCM10-Regular.otf","NewCM10-Bold.otf","NewCM10-Italic.otf","NewCM10-BoldItalic.otf","DejaVuSansMono.ttf","DejaVuSansMono-Bold.ttf","DejaVuSansMono-Oblique.ttf","DejaVuSansMono-BoldOblique.ttf"],$e=["InriaSerif-Bold.ttf","InriaSerif-BoldItalic.ttf","InriaSerif-Italic.ttf","InriaSerif-Regular.ttf","Roboto-Regular.ttf","NotoSerifCJKsc-Regular.otf"],je=["TwitterColorEmoji.ttf","NotoColorEmoji.ttf"];function ut(n,t){var i,o;const e=[...n];if(t&&(t==null?void 0:t.assets)!==!1&&((i=t==null?void 0:t.assets)!=null&&i.length)&&((o=t==null?void 0:t.assets)==null?void 0:o.length)>0){let s=t.assetUrlPrefix??"https://raw.githubusercontent.com/Myriad-Dreamin/typst/assets-fonts";s[s.length-1]!=="/"&&(s+="/");const c=d=>d.map(g=>s+g);for(const d of t.assets)switch(d){case"text":e.push(...c(De));break;case"cjk":e.push(...c($e));break;case"emoji":e.push(...c(je));break}}const r=async(s,{ref:c,builder:d})=>{t!=null&&t.fetcher&&c.setFetcher(t.fetcher),await c.loadFonts(d,e)};return r._preloadRemoteFontOptions=t,r}function St({byFamily:n}){return async(t,{builder:e})=>{const r=performance.now();if("queryLocalFonts"in window){const o=await window.queryLocalFonts();n=n??[];for(const s of o){if(!n.includes(s.family))continue;const c=await(await s.blob()).arrayBuffer();await e.add_raw_font(new Uint8Array(c))}}const i=performance.now();console.log("preload system font time used:",i-r)}}function We(n){return async(t,{builder:e})=>new Promise(r=>{e.set_package_registry(n,function(i){return n.resolve(i,this)}),r()})}function Be(n){return async(t,e)=>{var r;if(e.alreadySetAccessModel)throw new Error(`already set some assess model before: ${(r=e.alreadySetAccessModel.constructor)==null?void 0:r.name}(${e.alreadySetAccessModel})`);return e.alreadySetAccessModel=n,new Promise(i=>{e.builder.set_access_model(n,o=>{const s=n.getMTime(o);return s?s.getTime():0},o=>n.isFile(o)||!1,o=>n.getRealPath(o)||o,o=>n.readAll(o)),i()})}}const E=Symbol.for("reflexo-obj");var Tt=(n=>(n[n.PIXEL_PER_PT=3]="PIXEL_PER_PT",n))(Tt||{});class oe{constructor(t,e,r){h(this,"loadPageCount");h(this,"imageScaleFactor");h(this,"container");h(this,"canvasList");h(this,"textLayerList");h(this,"commonList");h(this,"textLayerParentList");h(this,"semanticLayerList");this.pageInfos=t,this.imageScaleFactor=r.pixelPerPt??Tt.PIXEL_PER_PT,e.innerHTML="",e.style.width="100%",this.container=e,this.canvasList=new Array(this.loadPageCount),this.textLayerList=new Array(this.loadPageCount),this.commonList=new Array(this.loadPageCount),this.textLayerParentList=new Array(this.loadPageCount),this.semanticLayerList=new Array(this.loadPageCount);const i=(o,s,c)=>{const d=Math.ceil(s.width)*this.imageScaleFactor,g=Math.ceil(s.height)*this.imageScaleFactor,w=this.canvasList[o]=document.createElement("canvas"),y=this.semanticLayerList[o]=document.createElement("div"),P=this.textLayerList[o]=document.createElement("div"),C=this.textLayerParentList[o]=document.createElement("div");if(w.getContext("2d")){const D=document.createElement("div");w.width=d,w.height=g,D.appendChild(w),c.appendChild(D),D.style.position="absolute"}{C.appendChild(P),C.className="typst-html-semantics";const D=e.offsetWidth,z=D/s.width;C.style.width=`${D}px`,C.style.height=`${s.height*z}px`,C.style.setProperty("--data-text-width",`${z}px`),C.style.setProperty("--data-text-height",`${z}px`),c.classList.add("typst-page"),c.classList.add("canvas"),c.style.width=`${D}px`,c.style.height=`${g*z}px`,c.style.position="relative",y.appendChild(C),c.appendChild(y)}};for(let o=0;o<this.pageInfos.length;o++){const s=this.pageInfos[o];let c;c=this.commonList[o]=document.createElement("div"),e.appendChild(c),i(o,s,c)}}resetLayout(){for(let t=0;t<this.pageInfos.length;t++){const e=this.pageInfos[t],r=Math.ceil(e.width)*this.imageScaleFactor,i=Math.ceil(e.height)*this.imageScaleFactor,o=this.canvasList[t].parentElement;if(!o)throw new Error(`canvasDiv is null for page ${t}, canvas list length ${this.canvasList.length}`);const s=this.commonList[t],c=this.textLayerParentList[t],d=this.container.offsetWidth,g=d/r;c.style.width=`${d}px`,c.style.height=`${i*g}px`,s.style.width=`${d}px`,s.style.height=`${i*g}px`;const w=this.container.offsetWidth/r;o.style.transformOrigin="0px 0px",o.style.transform=`scale(${w})`}}}const ze=n=>{let t=!1,e;return()=>t?e:(t=!0,e=n())};class se{constructor(t){h(this,"wasmBin");h(this,"initOnce");if(typeof t!="function")throw new Error("initFn is not a function");this.initOnce=ze(async()=>{await t(this.wasmBin)})}async init(t){this.wasmBin=t,await this.initOnce()}}const Ue=(n,t)=>t.some(e=>n instanceof e);let Lt,Dt;function qe(){return Lt||(Lt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ne(){return Dt||(Dt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _e=new WeakMap,Rt=new WeakMap,ae=new WeakMap,mt=new WeakMap,Ft=new WeakMap;function He(n){const t=new Promise((e,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{e(et(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return t.then(e=>{e instanceof IDBCursor&&_e.set(e,n)}).catch(()=>{}),Ft.set(t,n),t}function Ve(n){if(Rt.has(n))return;const t=new Promise((e,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{e(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});Rt.set(n,t)}let Ct={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return Rt.get(n);if(t==="objectStoreNames")return n.objectStoreNames||ae.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return et(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function Je(n){Ct=n(Ct)}function Ke(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const r=n.call(yt(this),t,...e);return ae.set(r,t.sort?t.sort():[t]),et(r)}:Ne().includes(n)?function(...t){return n.apply(yt(this),t),et(_e.get(this))}:function(...t){return et(n.apply(yt(this),t))}}function Ge(n){return typeof n=="function"?Ke(n):(n instanceof IDBTransaction&&Ve(n),Ue(n,qe())?new Proxy(n,Ct):n)}function et(n){if(n instanceof IDBRequest)return He(n);if(mt.has(n))return mt.get(n);const t=Ge(n);return t!==n&&(mt.set(n,t),Ft.set(t,n)),t}const yt=n=>Ft.get(n),Xe=["get","getKey","getAll","getAllKeys","count"],Qe=["put","add","delete","clear"],vt=new Map;function $t(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(vt.get(t))return vt.get(t);const e=t.replace(/FromIndex$/,""),r=t!==e,i=Qe.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Xe.includes(e)))return;const o=async function(s,...c){const d=this.transaction(s,i?"readwrite":"readonly");let g=d.store;return r&&(g=g.index(c.shift())),(await Promise.all([g[e](...c),i&&d.done]))[0]};return vt.set(t,o),o}Je(n=>({...n,get:(t,e,r)=>$t(t,e)||n.get(t,e,r),has:(t,e)=>!!$t(t,e)||n.has(t,e)}));class Ye{constructor(){h(this,"loadedFonts",new Set);h(this,"fetcher",fetch)}setFetcher(t){this.fetcher=t}async loadFonts(t,e){const r=new Function("m","return import(m)"),i=this.fetcher||(this.fetcher=await async function(){const{fetchBuilder:c,FileSystemCache:d}=await r("node-fetch-cache"),g=new d({cacheDirectory:".cache/typst/fonts"}),w=c.withCache(g);return function(y,P){const C=setTimeout(()=>{console.warn("font fetching is stucking:",y)},15e3);return w(y,P).finally(()=>{clearTimeout(C)})}}()),o=e.filter(c=>c instanceof Uint8Array?!0:this.loadedFonts.has(c)?!1:(this.loadedFonts.add(c),!0)),s=await Promise.all(o.map(async c=>{if(c instanceof Uint8Array){await t.add_raw_font(c);return}return new Uint8Array(await(await i(c)).arrayBuffer())}));for(const c of s)c&&await t.add_raw_font(c)}async build(t,e,r){const i={ref:this,builder:e,hooks:r};for(const s of(t==null?void 0:t.beforeBuild)??[])await s(void 0,i);return r.latelyBuild&&r.latelyBuild(i),await e.build()}}async function ce(n,t,e,r){var i;return await t.init((i=n==null?void 0:n.getModule)==null?void 0:i.call(n)),await new Ye().build(n,new e,r)}class Ot{constructor(t){h(this,"hookedElem");h(this,"kModule");h(this,"opts");h(this,"modes",[]);h(this,"partialRendering",!0);h(this,"renderMode","svg");h(this,"r");h(this,"previewMode",0);h(this,"isContentPreview",!1);h(this,"isMixinOutline",!1);h(this,"backgroundColor","black");h(this,"pageColor","white");h(this,"pixelPerPt",3);h(this,"retrieveDOMState");h(this,"isRendering",!1);h(this,"moduleInitialized",!1);h(this,"patchQueue",[]);h(this,"disposeList",[]);h(this,"canvasRenderCToken");h(this,"currentRealScale",1);h(this,"currentScaleRatio",1);h(this,"vpTimeout");h(this,"sampledRenderTime",0);h(this,"partialRenderPage",0);h(this,"outline");h(this,"cursorPosition");h(this,"cachedDOMState",{width:0,height:0,window:{innerWidth:0,innerHeight:0},boundingRect:{left:0,top:0,right:0}});var e,r;this.hookedElem=t.hookedElem,this.kModule=t.kModule,this.opts=t||{};{const{renderMode:i,previewMode:o,isContentPreview:s,retrieveDOMState:c}=t||{};this.partialRendering=!1,this.renderMode=i??this.renderMode,this.previewMode=o??this.previewMode,this.isContentPreview=s||!1,this.retrieveDOMState=c??(()=>({width:this.hookedElem.offsetWidth,height:this.hookedElem.offsetHeight,window:{innerWidth:window.innerWidth,innerHeight:window.innerHeight},boundingRect:this.hookedElem.getBoundingClientRect()})),this.backgroundColor=getComputedStyle(document.documentElement).getPropertyValue("--typst-preview-background-color")}this.hookedElem.classList.add("hide-scrollbar-x"),(e=this.hookedElem.parentElement)==null||e.classList.add("hide-scrollbar-x"),this.previewMode===1&&(this.hookedElem.classList.add("hide-scrollbar-y"),(r=this.hookedElem.parentElement)==null||r.classList.add("hide-scrollbar-y")),this.installCtrlWheelHandler()}reset(){this.kModule.reset(),this.moduleInitialized=!1}dispose(){const t=this.disposeList;this.disposeList=[],t.forEach(e=>e())}static derive(t,e){return["rescale","rerender","postRender"].reduce((r,i)=>(r[i]=t[`${i}$${e}`].bind(t),console.assert(r[i]!==void 0,`${i}$${e} is undefined`),r),{})}registerMode(t){const e=Ot.derive(this,t);this.modes.push([t,e]),t===this.renderMode&&(this.r=e)}installCtrlWheelHandler(){const t=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],e=r=>{var i,o,s,c;if(r.ctrlKey){r.preventDefault(),this.cachedDOMState=this.retrieveDOMState(),window.onresize!==null&&(window.onresize=null);const d=this.currentScaleRatio;if(r.deltaY<0){if(this.currentScaleRatio>=t.at(-1))return;this.currentScaleRatio=t.filter(C=>C>this.currentScaleRatio).at(0)}else if(r.deltaY>0){if(this.currentScaleRatio<=t.at(0))return;this.currentScaleRatio=t.filter(C=>C<this.currentScaleRatio).at(-1)}else return;const g=this.currentScaleRatio/d,w=r.pageX*(g-1),y=r.pageY*(g-1);Math.abs(this.currentScaleRatio-1)<1e-5?(this.hookedElem.classList.add("hide-scrollbar-x"),(i=this.hookedElem.parentElement)==null||i.classList.add("hide-scrollbar-x"),this.previewMode===1&&(this.hookedElem.classList.add("hide-scrollbar-y"),(o=this.hookedElem.parentElement)==null||o.classList.add("hide-scrollbar-y"))):(this.hookedElem.classList.remove("hide-scrollbar-x"),(s=this.hookedElem.parentElement)==null||s.classList.remove("hide-scrollbar-x"),this.previewMode===1&&(this.hookedElem.classList.remove("hide-scrollbar-y"),(c=this.hookedElem.parentElement)==null||c.classList.remove("hide-scrollbar-y")));const P=this.hookedElem.firstElementChild;if(P){const C=this.getSvgScaleRatio(),W=Number.parseFloat(P.getAttribute("data-height")),D=Math.ceil(W*C);this.hookedElem.style.height=`${D*2}px`}return window.scrollBy(w,y),this.addViewportChange(),!1}};this.renderMode!=="dom"&&(typeof acquireVsCodeApi<"u"?(window.addEventListener("wheel",e,{passive:!1}),this.disposeList.push(()=>{window.removeEventListener("wheel",e)})):(document.body.addEventListener("wheel",e,{passive:!1}),this.disposeList.push(()=>{document.body.removeEventListener("wheel",e)})))}getSvgScaleRatio(){const t=this.hookedElem.firstElementChild;if(!t)return 0;const e=this.cachedDOMState,r=Number.parseFloat(t.getAttribute("data-width")||t.getAttribute("width")||"1"),i=Number.parseFloat(t.getAttribute("data-height")||t.getAttribute("height")||"1");return this.currentRealScale=this.previewMode===1?Math.min(e.width/r,e.height/i):e.width/r,this.currentRealScale*this.currentScaleRatio}processQueue(t){const e=t[0];switch(e){case"new":case"diff-v1":return e==="new"&&this.reset(),this.kModule.manipulateData({action:"merge",data:t[1]}),this.moduleInitialized=!0,!0;case"viewport-change":return this.moduleInitialized?!0:(console.log("viewport-change before initialization"),!1);default:return console.log("svgUpdateEvent",t),!1}}triggerUpdate(){if(this.isRendering)return;this.isRendering=!0;const t=async()=>{if(this.cachedDOMState=this.retrieveDOMState(),this.patchQueue.length===0){this.isRendering=!1,this.postprocessChanges();return}try{let e=performance.now();const r=this.canvasRenderCToken;r&&(await r.cancel(),await r.wait(),this.canvasRenderCToken=void 0,console.log("cancel canvas rendering"));let i=!1;for(;this.patchQueue.length>0;)i=this.processQueue(this.patchQueue.shift())||i;let o=performance.now();i&&(this.r.rescale(),await this.r.rerender(),this.r.rescale());let s=performance.now();const c=(d,g,w)=>`${d} ${(w-g).toFixed(2)} ms`;this.sampledRenderTime=s-e,console.log([c("parse",e,o),c("rerender",o,s),c("total",e,s)].join(", ")),requestAnimationFrame(t)}catch(e){console.error(e),this.isRendering=!1,this.postprocessChanges()}};requestAnimationFrame(t)}postprocessChanges(){this.r.postRender(),this.previewMode===1&&document.querySelectorAll(".typst-page-number-indicator").forEach(t=>{t.textContent=`${this.kModule.retrievePagesInfo().length}`})}addChangement(t){t[0]==="new"&&this.patchQueue.splice(0,this.patchQueue.length);const e=()=>{this.vpTimeout=void 0,this.patchQueue.push(t),this.triggerUpdate()};this.vpTimeout!==void 0&&clearTimeout(this.vpTimeout),t[0]==="viewport-change"&&this.isRendering?this.vpTimeout=setTimeout(e,this.sampledRenderTime||100):e()}addViewportChange(){this.addChangement(["viewport-change",""])}}function Ze(n){return class{constructor(e){h(this,"impl");h(this,"kModule");if(e.isContentPreview&&(e.renderMode="canvas"),this.kModule=e.kModule,this.impl=new n(e),!this.impl.r)throw new Error(`mode is not supported, ${e==null?void 0:e.renderMode}`);e.isContentPreview&&(this.impl.partialRendering=!0,this.impl.pixelPerPt=1,this.impl.isMixinOutline=!0)}dispose(){this.impl.dispose()}reset(){this.impl.reset()}addChangement(e){this.impl.addChangement(e)}addViewportChange(){this.impl.addViewportChange()}setPageColor(e){this.impl.pageColor=e,this.addViewportChange()}setPartialRendering(e){this.impl.partialRendering=e}setCursor(e,r,i){this.impl.cursorPosition=[e,r,i]}setPartialPageNumber(e){return e<=0||e>this.kModule.retrievePagesInfo().length?!1:(this.impl.partialRenderPage=e-1,this.addViewportChange(),!0)}getPartialPageNumber(){return this.impl.partialRenderPage+1}setOutineData(e){this.impl.outline=e,this.addViewportChange()}}}function tn(n,...t){return t.reduce((e,r)=>r(e),n)}class en{constructor(){h(this,"isCancellationRequested",!1);h(this,"_onCancelled");h(this,"_onCancelledResolveResolved");let t,e;this._onCancelled=new Promise(r=>{t=r,e&&e(r)}),this._onCancelledResolveResolved=new Promise(r=>{e=r,t&&r(t)})}async cancel(){await this._onCancelledResolveResolved,this.isCancellationRequested=!0}isCancelRequested(){return this.isCancellationRequested}async consume(){(await this._onCancelledResolveResolved)()}wait(){return this._onCancelled}}const nn=()=>new Promise(n=>requestAnimationFrame(n));function rn(n){return class extends n{constructor(...r){super(...r);h(this,"tmpl",document.createElement("template"));h(this,"stub",this.createElement("<stub></stub>"));h(this,"plugin");h(this,"docKernel");h(this,"resourceHeader");h(this,"pages",[]);h(this,"domScale",1);h(this,"track_mode",0);h(this,"current_task");h(this,"viewport");if(this.registerMode("dom"),this.disposeList.push(()=>{this.dispose()}),this.plugin=this.opts.renderer,this.opts.domScale!==void 0){if(this.opts.domScale<=0)throw new Error("domScale must be positive");this.domScale=this.opts.domScale}}dispose(){for(const r of this.pages)r.dispose();this.docKernel&&this.docKernel.free()}createElement(r){return this.tmpl.innerHTML=r,this.tmpl.content.firstElementChild}async mountDom(r){if(console.log("mountDom",r),this.docKernel)throw new Error("already mounted");this.hookedElem.innerHTML='<svg class="typst-svg-resources" viewBox="0 0 0 0" width="0" height="0" style="opacity: 0; position: absolute;"></svg>',this.resourceHeader=this.hookedElem.querySelector(".typst-svg-resources"),this.docKernel=await this.plugin.renderer.mount_dom(this.kModule[E],this.hookedElem),this.docKernel.bind_functions({populateGlyphs:i=>{let o=this.createElement(i);console.log("populateGlyphs",o);let s=o.firstElementChild;this.resourceHeader.append(s)}})}async cancelAnyway$dom(){if(console.log("cancelAnyway$dom"),this.current_task){const r=this.current_task;this.current_task=void 0,await r.cancel()}}retrieveDOMPages(){return Array.from(this.hookedElem.querySelectorAll(".typst-dom-page"))}postRender$dom(){}rescale$dom(){}getDomViewport(r,i){const o=i.left,s=-i.top,c=i.right,d=r.innerHeight-i.top,g={x:0,y:s/this.domScale,width:Math.max(c-o,0)/this.domScale,height:Math.max(d-s,0)/this.domScale};return(g.width<=0||g.height<=0)&&(g.x=g.y=g.width=g.height=0),g}async rerender$dom(){const r=this.retrieveDOMState(),{x:i,y:o,width:s,height:c}=this.getDomViewport(r.window,r.boundingRect);if(!await this.docKernel.relayout(i,o,s,c))return;const g=new en;this.doRender$dom(g),this.current_task=g}async doRender$dom(r){const i=(d,g)=>{if(d&&!r.isCancelRequested()&&g)return g()},o=this.retrieveDOMPages().map(d=>{const{innerWidth:g,innerHeight:w}=window,y=d.getBoundingClientRect();return{inWindow:!(y.left>g||y.right<0||y.top>w||y.bottom<0),page:d}}),s=async d=>{if(await nn(),r.isCancelRequested()){console.log("cancel stage",0,d);return}const g=o[d].page,w=g.getBoundingClientRect(),y=this.getDomViewport(window,w),P=$=>this.docKernel.need_repaint(d,y.x,y.y,y.width,y.height,$),C=$=>this.docKernel.repaint(d,y.x,y.y,y.width,y.height,$),W=$=>{if(!r.isCancelRequested())return i(P($),()=>C($))};await W(0);const D=(w.width?Number.parseFloat(g.getAttribute("data-width"))/w.width:1)*this.domScale,z=(w.height?Number.parseFloat(g.getAttribute("data-height"))/w.height:1)*this.domScale;if(y.x*=D,y.y*=z,y.y-=100,y.width*=D,y.height*=z,y.height+=200,await W(1),await W(2),r.isCancelRequested()){console.log("cancel stage",2,d);return}P(3)?(async()=>{if(await C(3),!r.isCancelRequested())return W(4)})():await W(4)},c=async d=>{for(let g=0;g<o.length;++g){if(r.isCancelRequested()){console.log("cancel page",0,g);return}o[g].inWindow===d&&await s(g)}};this.cancelAnyway$dom(),await c(!0),await c(!1),!r.isCancelRequested()&&console.log("finished",0)}}}class on extends Ze(tn(Ot,rn)){}var ne;let xt=(ne=E,class{constructor(t,e){h(this,ne);this.plugin=t,this[E]=e}set backgroundColor(t){t!==void 0&&(this[E].background_color=t)}get backgroundColor(){return this[E].background_color}set pixelPerPt(t){t!==void 0&&(this[E].pixel_per_pt=t)}get pixelPerPt(){return this[E].pixel_per_pt}reset(){this.plugin.resetSession(this)}get doc_width(){return this[E].doc_width}get docWidth(){return this[E].doc_width}get doc_height(){return this[E].doc_height}get docHeight(){return this[E].doc_height}retrievePagesInfo(){const t=this[E].pages_info,e=[],r=t.page_count;for(let i=0;i<r;i++){const o=t.page(i);e.push({pageOffset:o.page_off,width:o.width_pt,height:o.height_pt})}return e}getSourceLoc(t){return this[E].source_span(t)}renderSvg(t){return this.plugin.renderSvg({renderSession:this,...t})}renderToSvg(t){return this.plugin.renderToSvg({renderSession:this,...t})}renderCanvas(t){return this.plugin.renderCanvas({renderSession:this,...t})}manipulateData(t){this.plugin.manipulateData({renderSession:this,...t})}renderSvgDiff(t){return this.plugin.renderSvgDiff({renderSession:this,...t})}get_source_loc(t){return this[E].source_span(t)}render_in_window(t,e,r,i){return this[E].render_in_window(t,e,r,i)}merge_delta(t){this.plugin.manipulateData({renderSession:this,action:"merge",data:t})}});var re;let sn=(re=E,class{constructor(t,e){h(this,re);h(this,"managedCanvasElemList",new Map);h(this,"canvasCounter",Math.random());this.plugin=t,this[E]=e}manipulateData(t,e){return this[E].manipulate_data(t,e)}renderCanvas(t){const e=this.managedCanvasElemList;for(const[c,d]of e)d[0]=0;for(const c of t){const d=c.canvas;let g=d.dataset.manageId,w=2;g||(g=this.canvasCounter.toFixed(5),this.canvasCounter+=1,d.dataset.manageId=g,w=1);let y=e.get(g);if(y&&y[0]!==0)throw new Error("cannot update a canvas for two times in batch");e.set(g,[w,{...c}])}const r=Array.from(e.entries()),i=new Uint8Array(r.length),o=new Array(r.length),s=r.map(([c,[d,g]],w)=>(d||e.delete(c),i[w]=d,o[w]=g.canvas,this.plugin.canvasOptionsToRust(g)));return this[E].render_canvas(i,o,s)}async retrievePagesInfo(){const t=await this[E].get_pages_info();console.log(t);const e=[],r=t.page_count;for(let i=0;i<r;i++){const o=t.page(i);e.push({pageOffset:o.page_off,width:o.width_pt,height:o.height_pt})}return e}});const _n=n=>new se(async t=>await n.default(t));function At(){return new ue}function an(){return new ue}async function cn(){return(await Promise.resolve().then(()=>ve)).renderer_build_info()}let jt=!0;class ue{constructor(){h(this,"renderer");h(this,"rendererJs")}async init(t){var r;this.rendererJs=await(((r=t==null?void 0:t.getWrapper)==null?void 0:r.call(t))||Promise.resolve().then(()=>ve));const e=this.rendererJs.TypstRendererBuilder;this.renderer=await ce(t,_n(this.rendererJs),e,{})}loadGlyphPack(t){return Promise.resolve()}createOptionsToRust(t){const e=new this.rendererJs.CreateSessionOptions;return t.format!==void 0&&(e.format=t.format),t.artifactContent!==void 0&&(e.artifact_content=t.artifactContent),e}canvasOptionsToRust(t){const e=new this.rendererJs.RenderPageImageOptions;if(t.pageOffset===void 0)throw new Error("pageOffset is required in reflexo v0.5.0");if(e.page_off=t.pageOffset,t.cacheKey!==void 0&&(e.cache_key=t.cacheKey),t.backgroundColor!==void 0&&(e.background_color=t.backgroundColor),t.pixelPerPt!==void 0&&(e.pixel_per_pt=t.pixelPerPt),t.dataSelection!==void 0){let r=0;t.dataSelection.body?r|=1:t.canvas&&jt&&(jt=!1,console.warn("dataSelection.body is not set but providing canvas for body")),(t.dataSelection.text||t.dataSelection.annotation)&&console.error("dataSelection.text and dataSelection.annotation are deprecated"),t.dataSelection.semantics&&(r|=8),e.data_selection=r}return e}retrievePagesInfoFromSession(t){return t.retrievePagesInfo()}renderCanvas(t){return this.withinOptionSession(t,async e=>this.renderer.render_page_to_canvas(e[E],t.canvas||void 0,this.canvasOptionsToRust(t)))}async inAnimationFrame(t){return new Promise((e,r)=>{requestAnimationFrame(()=>{try{e(t())}catch(i){r(i)}})})}async renderDisplayLayer(t,e,r){const o=t[E].pages_info.page_count,s=async(w,y)=>{const C=e[w].getContext("2d");if(!C)throw new Error("canvas context is null");return await this.renderCanvas({...r,canvas:C,renderSession:t,pageOffset:y})},c=performance.now(),d=await(async()=>{const w=[];for(let y=0;y<o;y++)w.push(await this.inAnimationFrame(()=>s(y,y)));return w})(),g=performance.now();return console.log(`display layer used: render = ${(g-c).toFixed(1)}ms`),d}renderTextLayer(t,e){const r=performance.now();t.forEach((o,s)=>{o.innerHTML=e[s].htmlSemantics[0]});const i=performance.now();console.log(`text layer used: render = ${(i-r).toFixed(1)}ms`)}async render(t){if("format"in t&&t.format!=="vector"&&["serde_json","js","ir"].includes(t.format))throw new Error(`deprecated format ${t.format}, please use vector format`);return this.renderToCanvas(t)}async renderDom(t){if("format"in t&&t.format!=="vector"&&["serde_json","js","ir"].includes(t.format))throw new Error(`deprecated format ${t.format}, please use vector format`);return this.withinOptionSession(t,async e=>{const r=new on({...t,renderMode:"dom",hookedElem:t.container,kModule:e,renderer:this});return await r.impl.mountDom(t.pixelPerPt),r})}async renderToCanvas(t){let e,r;const i=t.container;i.style.visibility="hidden";const o=async(s,c)=>{try{r=await this.renderDisplayLayer(e,s,t),c()}finally{i.style.visibility="visible"}};return this.withinOptionSession(t,async s=>{if(e=s,e[E].pages_info.page_count===0)throw new Error("No page found in session");if(t.pixelPerPt!==void 0&&t.pixelPerPt<=0)throw new Error("Invalid typst.RenderOptions.pixelPerPt, should be a positive number "+t.pixelPerPt);let c=t.backgroundColor;if(c!==void 0&&!/^#[0-9a-f]{6}$/.test(c))throw new Error("Invalid typst.backgroundColor color for matching ^#?[0-9a-f]{6}$ "+c);e.pixelPerPt=t.pixelPerPt??Tt.PIXEL_PER_PT,e.backgroundColor=c??"#ffffff";const d=performance.now(),g=new oe(this.retrievePagesInfoFromSession(e),i,t),w=performance.now();console.log(`layer used: retieve = ${(w-d).toFixed(1)}ms`),await o(g.canvasList,()=>g.resetLayout()),this.renderTextLayer(g.textLayerList,r)})}createModule(t){return Promise.resolve(new xt(this,this.renderer.create_session(t&&this.createOptionsToRust({format:"vector",artifactContent:t}))))}async createWorkerV0(t){return new sn(this,await this.renderer.create_worker(t))}workerBridge(){return this.renderer.create_worker_bridge()}renderSvg(t,e){if(t instanceof xt||e)throw new Error("removed api, please use renderToSvg({ renderSession, container }) instead");return this.withinOptionSession(t,async r=>{let i;return t.data_selection&&(i=0,t.data_selection.body&&(i|=1),t.data_selection.defs&&(i|=2),t.data_selection.css&&(i|=4),t.data_selection.js&&(i|=8)),Promise.resolve(this.renderer.svg_data(r[E],i))})}renderSvgDiff(t){return t.window?this.renderer.render_svg_diff(t.renderSession[E],t.window.lo.x,t.window.lo.y,t.window.hi.x,t.window.hi.y):this.renderer.render_svg_diff(t.renderSession[E],0,0,1e33,1e33)}renderToSvg(t){return this.withinOptionSession(t,async e=>Promise.resolve(this.renderer.render_svg(e[E],t.container)))}getCustomV1(t){return Promise.resolve(this.renderer.get_customs(t.renderSession[E]))}resetSession(t){return this.renderer.reset(t[E])}manipulateData(t){return this.renderer.manipulate_data(t.renderSession[E],t.action??"reset",t.data)}withinOptionSession(t,e){function r(i){return"artifactContent"in i}if("renderSession"in t)return e(t.renderSession);if(r(t))return this.runWithSession(t,e);throw new Error("Invalid render options, should be one of RenderByContentOptions|RenderBySessionOptions")}async runWithSession(t,e){let r=t,i=e;e||(r=void 0,i=t);const o=this.renderer.create_session(r&&this.createOptionsToRust(r));try{const s=await i(new xt(this,o));return o.free(),s}catch(s){throw o.free(),s}}}var ie;ie=E;class un{constructor(t){h(this,ie);this[E]=t}reset(){this[E].reset()}current(){return this[E].current()}setAttachDebugInfo(t){this[E].set_attach_debug_info(t)}}const dn=new se(async n=>await(await Promise.resolve().then(()=>Ae)).default(n));function de(){return new gn}class gn{constructor(){h(this,"compiler");h(this,"compilerJs")}async init(t){var c,d,g,w;this.compilerJs=await Promise.resolve().then(()=>Ae);const e=this.compilerJs.TypstCompilerBuilder,r={...t||{}},i=(c=r.beforeBuild)==null?void 0:c.some(y=>y._preloadRemoteFontOptions!==void 0),o=(d=r.beforeBuild)==null?void 0:d.some(y=>{var P;return((P=y._preloadRemoteFontOptions)==null?void 0:P.assets)!==void 0}),s=(g=r.beforeBuild)==null?void 0:g.some(y=>{var P;return((P=y._preloadRemoteFontOptions)==null?void 0:P.assets)===!1});(!i||!o&&!s)&&((w=r.beforeBuild)==null||w.push(ut([],{assets:["text"]}))),this.compiler=await ce(t,dn,e,{})}compile(t){return new Promise(e=>{if("incrementalServer"in t){e(this.compiler.incr_compile(t.mainFilePath,It(t.inputs),t.incrementalServer[E],Wt(t.diagnostics)));return}e(this.compiler.compile(t.mainFilePath,It(t.inputs),t.format||"vector",Wt(t.diagnostics)))})}query(t){return new Promise(e=>{e(JSON.parse(this.compiler.query(t.mainFilePath,It(t.inputs),t.selector,t.field)))})}getSemanticTokenLegend(){return new Promise(t=>{t(this.compiler.get_semantic_token_legend())})}getSemanticTokens(t){return new Promise(e=>{this.compiler.reset(),e(this.compiler.get_semantic_tokens(t.offsetEncoding||"utf-16",t.mainFilePath,t.resultId))})}async withIncrementalServer(t){const e=new un(this.compiler.create_incr_server());try{return await t(e)}finally{e[E].free()}}async getAst(t){return this.compiler.get_ast(t)}async reset(){await new Promise(t=>{this.compiler.reset(),t(void 0)})}addSource(t,e){if(arguments.length>2)throw new Error("use of addSource(path, source, isMain) is deprecated, please use addSource(path, source) instead");this.compiler.add_source(t,e)}mapShadow(t,e){this.compiler.map_shadow(t,e)}unmapShadow(t){this.compiler.unmap_shadow(t)}resetShadow(){this.compiler.reset_shadow()}renderPageToCanvas(){throw new Error("Please use the api TypstRenderer.renderToCanvas in v0.4.0")}}function It(n){return n?Object.entries(n):void 0}function Wt(n){switch(n){case"none":return 1;case"unix":return 2;case"full":return 3;default:return 0}}class ge{constructor(t,e){h(this,"fullyCached");h(this,"mTimes",new Map);h(this,"mRealPaths",new Map);h(this,"mData",new Map);this.root=t,t.endsWith("/")&&(this.root=this.root.slice(0,this.root.length-1)),e!=null&&e.polyfillHeadRequest,this.fullyCached=!!(e!=null&&e.fullyCached)}reset(){this.mTimes.clear(),this.mRealPaths.clear(),this.mData.clear()}resolvePath(t){return this.root+t}insertFile(t,e,r){this.mTimes.set(t,r),this.mData.set(t,e)}removeFile(t){this.mTimes.delete(t),this.mData.delete(t)}async getPreloadScript(){const t=[];t.push("((async () => {"),t.push("const snapshot = {  root: '', mTimes: new Map(),  mRealPaths: new Map(),  mData: [],};"),t.push("const runFetch = async (path) => {"),t.push("  const res = await fetch(snapshot.root + path);"),t.push("  const buffer = await res.arrayBuffer();"),t.push("  return [path, new Uint8Array(buffer)];"),t.push("};"),t.push(`snapshot.root = ${JSON.stringify(this.root)};`),t.push(`snapshot.mTimes = new Map([${[...this.mTimes.entries()].map(([r,i])=>`[${JSON.stringify(r)}, ${(i==null?void 0:i.getTime())||"undefined"}]`).join(", ")}]);`),t.push(`snapshot.mRealPaths = new Map([${[...this.mRealPaths.entries()].map(([r,i])=>`[${JSON.stringify(r)}, ${JSON.stringify(i)}]`).join(", ")}]);`);const e=await Promise.all([...this.mData.entries()].map(async([r,i])=>(r=JSON.stringify(r),i?`runFetch(${r})`:`Promise.resolve([${r}, undefined])`)));return t.push(`snapshot.mData = await Promise.all([${e.join(", ")}]);`),t.push("return snapshot;"),t.push("})())"),t.join(`
`)}getLastModified(t){const e=new XMLHttpRequest;return e.open("HEAD",t,!1),e.send(null),e.status===200?e.getResponseHeader("Last-Modified"):null}getMTimeInternal(t){const e=this.getLastModified(this.resolvePath(t));if(e)return new Date(e)}getMTime(t){if(t.startsWith("/@memory/"))return this.mTimes.has(t)?this.mTimes.get(t):void 0;if(!this.fullyCached)return this.getMTimeInternal(t);if(this.mTimes.has(t))return this.mTimes.get(t);const e=this.getMTimeInternal(t);return this.mTimes.set(t,e),e}isFile(){return!0}getRealPath(t){return t}readAllInternal(t){const e=new XMLHttpRequest;if(e.overrideMimeType("text/plain; charset=x-user-defined"),e.open("GET",this.resolvePath(t),!1),e.send(null),e.status===200&&(e.response instanceof String||typeof e.response=="string"))return Uint8Array.from(e.response,r=>r.charCodeAt(0))}readAll(t){if(t.startsWith("/@memory/"))return this.mData.has(t)?this.mData.get(t):void 0;if(!this.fullyCached)return this.readAllInternal(t);if(this.mData.has(t))return this.mData.get(t);const e=this.readAllInternal(t);return this.mData.set(t,e),e}}class fn{constructor(){h(this,"mTimes",new Map);h(this,"mData",new Map)}reset(){this.mTimes.clear(),this.mData.clear()}insertFile(t,e,r){this.mTimes.set(t,r),this.mData.set(t,e)}removeFile(t){this.mTimes.delete(t),this.mData.delete(t)}getMTime(t){if(t.startsWith("/@memory/")&&this.mTimes.has(t))return this.mTimes.get(t)}isFile(){return!0}getRealPath(t){return t}readAll(t){if(t.startsWith("/@memory/")&&this.mData.has(t))return this.mData.get(t)}}class fe{constructor(t){h(this,"cache",new Map);this.am=t}resolvePath(t){return`https://packages.typst.org/preview/${t.name}-${t.version}.tar.gz`}pullPackageData(t){const e=new XMLHttpRequest;if(e.overrideMimeType("text/plain; charset=x-user-defined"),e.open("GET",this.resolvePath(t),!1),e.send(null),e.status===200&&(e.response instanceof String||typeof e.response=="string"))return Uint8Array.from(e.response,r=>r.charCodeAt(0))}resolve(t,e){if(t.namespace!=="preview")return;const r=this.resolvePath(t);if(this.cache.has(r))return this.cache.get(r)();const i=this.pullPackageData(t);if(!i)return;const o=`/@memory/fetch/packages/preview/${t.namespace}/${t.name}/${t.version}`,s=[];e.untar(i,(d,g,w)=>{s.push([o+"/"+d,g,new Date(w)])});const c=()=>{for(const[d,g,w]of s)this.am.insertFile(d,g,w);return o};return this.cache.set(r,c),c()}}typeof window<"u"&&(window.TypstRenderModule={RenderView:oe,createTypstRenderer:At,createTypstSvgRenderer:At,preloadRemoteFonts:ut,preloadSystemFonts:St},window.TypstCompileModule={createTypstCompiler:de,preloadRemoteFonts:ut,preloadSystemFonts:St,FetchAccessModel:ge,MemoryAccessModel:fn,FetchPackageRegistry:fe,withAccessModel:Be,withPackageRegistry:We});let _;const H=new Array(128).fill(void 0);H.push(void 0,null,!0,!1);function a(n){return H[n]}let G=H.length;function wn(n){n<132||(H[n]=G,G=n)}function R(n){const t=a(n);return wn(n),t}function m(n){G===H.length&&H.push(H.length+1);const t=G;if(G=H[t],typeof G!="number")throw new Error("corrupt heap");return H[t]=n,t}function F(n){if(typeof n!="boolean")throw new Error(`expected a boolean argument, found ${typeof n}`)}const we=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&we.decode();let Y=null;function nt(){return(Y===null||Y.byteLength===0)&&(Y=new Uint8Array(_.memory.buffer)),Y}function k(n,t){return n=n>>>0,we.decode(nt().subarray(n,n+t))}let M=0;const at=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},ln=typeof at.encodeInto=="function"?function(n,t){return at.encodeInto(n,t)}:function(n,t){const e=at.encode(n);return t.set(e),{read:n.length,written:e.length}};function L(n,t,e){if(typeof n!="string")throw new Error(`expected a string argument, found ${typeof n}`);if(e===void 0){const c=at.encode(n),d=t(c.length,1)>>>0;return nt().subarray(d,d+c.length).set(c),M=c.length,d}let r=n.length,i=t(r,1)>>>0;const o=nt();let s=0;for(;s<r;s++){const c=n.charCodeAt(s);if(c>127)break;o[i+s]=c}if(s!==r){s!==0&&(n=n.slice(s)),i=e(i,r,r=s+n.length*3,1)>>>0;const c=nt().subarray(i+s,i+r),d=ln(n,c);if(d.read!==n.length)throw new Error("failed to pass whole string");s+=d.written,i=e(i,r,s,1)>>>0}return M=s,i}function T(n){return n==null}let J=null;function b(){return(J===null||J.buffer.detached===!0||J.buffer.detached===void 0&&J.buffer!==_.memory.buffer)&&(J=new DataView(_.memory.buffer)),J}function Mt(n){const t=typeof n;if(t=="number"||t=="boolean"||n==null)return`${n}`;if(t=="string")return`"${n}"`;if(t=="symbol"){const i=n.description;return i==null?"Symbol":`Symbol(${i})`}if(t=="function"){const i=n.name;return typeof i=="string"&&i.length>0?`Function(${i})`:"Function"}if(Array.isArray(n)){const i=n.length;let o="[";i>0&&(o+=Mt(n[0]));for(let s=1;s<i;s++)o+=", "+Mt(n[s]);return o+="]",o}const e=/\[object ([^\]]+)\]/.exec(toString.call(n));let r;if(e.length>1)r=e[1];else return toString.call(n);if(r=="Object")try{return"Object("+JSON.stringify(n)+")"}catch{return"Object"}return n instanceof Error?`${n.name}: ${n.message}
${n.stack}`:r}const dt=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>{_.__wbindgen_export_2.get(n.dtor)(n.a,n.b)});function Bt(n,t,e,r){const i={a:n,b:t,cnt:1,dtor:e},o=(...s)=>{i.cnt++;try{return r(i.a,i.b,...s)}finally{--i.cnt===0&&(_.__wbindgen_export_2.get(i.dtor)(i.a,i.b),i.a=0,dt.unregister(i))}};return o.original=i,dt.register(o,i,i),o}function f(n,t){try{return n.apply(this,t)}catch(e){let r=function(){try{return e instanceof Error?`${e.message}

Stack:
${e.stack}`:e.toString()}catch{return"<failed to stringify thrown value>"}}();throw console.error("wasm-bindgen: imported JS function that was not marked as `catch` threw an error:",r),e}}function l(n){if(typeof n!="number")throw new Error(`expected a number argument, found ${typeof n}`)}function bn(n,t){l(n),l(t),_.__wbindgen_export_3(n,t)}function pn(n,t,e){l(n),l(t),_.__wbindgen_export_4(n,t,m(e))}function hn(n,t,e,r){const i={a:n,b:t,cnt:1,dtor:e},o=(...s)=>{i.cnt++;const c=i.a;i.a=0;try{return r(c,i.b,...s)}finally{--i.cnt===0?(_.__wbindgen_export_2.get(i.dtor)(c,i.b),dt.unregister(i)):i.a=c}};return o.original=i,dt.register(o,i,i),o}function mn(n,t,e){l(n),l(t),_.__wbindgen_export_5(n,t,m(e))}function I(n,t){try{return n.apply(this,t)}catch(e){_.__wbindgen_export_7(m(e))}}function yn(n,t,e,r){l(n),l(t),_.__wbindgen_export_8(n,t,m(e),m(r))}function U(n,t){if(!(n instanceof t))throw new Error(`expected instance of ${t.name}`);return n.ptr}function vn(){const n=_.renderer_build_info();return R(n)}function gt(n,t){const e=t(n.length*1,1)>>>0;return nt().set(n,e/1),M=n.length,e}function zt(n,t){const e=t(n.length*4,4)>>>0,r=b();for(let i=0;i<n.length;i++)r.setUint32(e+4*i,m(n[i]),!0);return M=n.length,e}let Z=null;function xn(){return(Z===null||Z.byteLength===0)&&(Z=new Uint32Array(_.memory.buffer)),Z}function In(n,t){const e=t(n.length*4,4)>>>0;return xn().set(n,e/4),M=n.length,e}const Ut=["nonzero","evenodd"],qt=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>_.__wbg_createsessionoptions_free(n>>>0,1));class le{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,qt.unregister(this),t}free(){const t=this.__destroy_into_raw();_.__wbg_createsessionoptions_free(t,0)}constructor(){const t=_.createsessionoptions_new();return this.__wbg_ptr=t>>>0,qt.register(this,this.__wbg_ptr,this),this}set format(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr);const e=L(t,_.__wbindgen_export_0,_.__wbindgen_export_1),r=M;_.createsessionoptions_set_format(this.__wbg_ptr,e,r)}set artifact_content(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr);const e=gt(t,_.__wbindgen_export_0),r=M;_.createsessionoptions_set_artifact_content(this.__wbg_ptr,e,r)}}const Nt=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>_.__wbg_incrdomdocclient_free(n>>>0,1));class ft{constructor(){throw new Error("cannot invoke `new` directly")}static __wrap(t){t=t>>>0;const e=Object.create(ft.prototype);return e.__wbg_ptr=t,Nt.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,Nt.unregister(this),t}free(){const t=this.__destroy_into_raw();_.__wbg_incrdomdocclient_free(t,0)}bind_functions(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr),_.incrdomdocclient_bind_functions(this.__wbg_ptr,m(t))}relayout(t,e,r,i){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr);const o=_.incrdomdocclient_relayout(this.__wbg_ptr,t,e,r,i);return R(o)}need_repaint(t,e,r,i,o,s){try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const w=_.__wbindgen_add_to_stack_pointer(-16);l(this.__wbg_ptr),l(t),l(s),_.incrdomdocclient_need_repaint(w,this.__wbg_ptr,t,e,r,i,o,s);var c=b().getInt32(w+4*0,!0),d=b().getInt32(w+4*1,!0),g=b().getInt32(w+4*2,!0);if(g)throw R(d);return c!==0}finally{_.__wbindgen_add_to_stack_pointer(16)}}repaint(t,e,r,i,o,s){try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const w=_.__wbindgen_add_to_stack_pointer(-16);l(this.__wbg_ptr),l(t),l(s),_.incrdomdocclient_repaint(w,this.__wbg_ptr,t,e,r,i,o,s);var c=b().getInt32(w+4*0,!0),d=b().getInt32(w+4*1,!0),g=b().getInt32(w+4*2,!0);if(g)throw R(d);return R(c)}finally{_.__wbindgen_add_to_stack_pointer(16)}}}const Ht=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>_.__wbg_pageinfo_free(n>>>0,1));class it{constructor(){throw new Error("cannot invoke `new` directly")}static __wrap(t){t=t>>>0;const e=Object.create(it.prototype);return e.__wbg_ptr=t,Ht.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,Ht.unregister(this),t}free(){const t=this.__destroy_into_raw();_.__wbg_pageinfo_free(t,0)}get page_off(){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");return l(this.__wbg_ptr),_.pageinfo_page_off(this.__wbg_ptr)>>>0}get width_pt(){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");return l(this.__wbg_ptr),_.pageinfo_width_pt(this.__wbg_ptr)}get height_pt(){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");return l(this.__wbg_ptr),_.pageinfo_height_pt(this.__wbg_ptr)}}const Vt=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>_.__wbg_pagesinfo_free(n>>>0,1));class wt{constructor(){throw new Error("cannot invoke `new` directly")}static __wrap(t){t=t>>>0;const e=Object.create(wt.prototype);return e.__wbg_ptr=t,Vt.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,Vt.unregister(this),t}free(){const t=this.__destroy_into_raw();_.__wbg_pagesinfo_free(t,0)}get page_count(){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");return l(this.__wbg_ptr),_.pagesinfo_page_count(this.__wbg_ptr)>>>0}page_by_number(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr),l(t);const e=_.pagesinfo_page_by_number(this.__wbg_ptr,t);return e===0?void 0:it.__wrap(e)}page(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr),l(t);const e=_.pagesinfo_page(this.__wbg_ptr,t);return it.__wrap(e)}width(){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");return l(this.__wbg_ptr),_.pagesinfo_width(this.__wbg_ptr)}height(){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");return l(this.__wbg_ptr),_.pagesinfo_height(this.__wbg_ptr)}}const Jt=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>_.__wbg_renderpageimageoptions_free(n>>>0,1));class st{static __unwrap(t){return t instanceof st?t.__destroy_into_raw():0}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,Jt.unregister(this),t}free(){const t=this.__destroy_into_raw();_.__wbg_renderpageimageoptions_free(t,0)}constructor(){const t=_.renderpageimageoptions_new();return this.__wbg_ptr=t>>>0,Jt.register(this,this.__wbg_ptr,this),this}get pixel_per_pt(){try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const r=_.__wbindgen_add_to_stack_pointer(-16);l(this.__wbg_ptr),_.renderpageimageoptions_pixel_per_pt(r,this.__wbg_ptr);var t=b().getInt32(r+4*0,!0),e=b().getFloat32(r+4*1,!0);return t===0?void 0:e}finally{_.__wbindgen_add_to_stack_pointer(16)}}set pixel_per_pt(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr),T(t)||l(t),_.renderpageimageoptions_set_pixel_per_pt(this.__wbg_ptr,!T(t),T(t)?0:t)}get background_color(){try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const r=_.__wbindgen_add_to_stack_pointer(-16);l(this.__wbg_ptr),_.renderpageimageoptions_background_color(r,this.__wbg_ptr);var t=b().getInt32(r+4*0,!0),e=b().getInt32(r+4*1,!0);let i;return t!==0&&(i=k(t,e).slice(),_.__wbindgen_export_6(t,e*1,1)),i}finally{_.__wbindgen_add_to_stack_pointer(16)}}set background_color(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr);var e=T(t)?0:L(t,_.__wbindgen_export_0,_.__wbindgen_export_1),r=M;_.renderpageimageoptions_set_background_color(this.__wbg_ptr,e,r)}get page_off(){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");return l(this.__wbg_ptr),_.renderpageimageoptions_page_off(this.__wbg_ptr)>>>0}set page_off(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr),l(t),_.renderpageimageoptions_set_page_off(this.__wbg_ptr,t)}get cache_key(){try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const r=_.__wbindgen_add_to_stack_pointer(-16);l(this.__wbg_ptr),_.renderpageimageoptions_cache_key(r,this.__wbg_ptr);var t=b().getInt32(r+4*0,!0),e=b().getInt32(r+4*1,!0);let i;return t!==0&&(i=k(t,e).slice(),_.__wbindgen_export_6(t,e*1,1)),i}finally{_.__wbindgen_add_to_stack_pointer(16)}}set cache_key(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr);var e=T(t)?0:L(t,_.__wbindgen_export_0,_.__wbindgen_export_1),r=M;_.renderpageimageoptions_set_cache_key(this.__wbg_ptr,e,r)}get data_selection(){try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const r=_.__wbindgen_add_to_stack_pointer(-16);l(this.__wbg_ptr),_.renderpageimageoptions_data_selection(r,this.__wbg_ptr);var t=b().getInt32(r+4*0,!0),e=b().getInt32(r+4*1,!0);return t===0?void 0:e>>>0}finally{_.__wbindgen_add_to_stack_pointer(16)}}set data_selection(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr),T(t)||l(t),_.renderpageimageoptions_set_data_selection(this.__wbg_ptr,!T(t),T(t)?0:t)}}const Kt=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>_.__wbg_rendersession_free(n>>>0,1));class j{constructor(){throw new Error("cannot invoke `new` directly")}static __wrap(t){t=t>>>0;const e=Object.create(j.prototype);return e.__wbg_ptr=t,Kt.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,Kt.unregister(this),t}free(){const t=this.__destroy_into_raw();_.__wbg_rendersession_free(t,0)}render_in_window(t,e,r,i){let o,s;try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const g=_.__wbindgen_add_to_stack_pointer(-16);l(this.__wbg_ptr),_.rendersession_render_in_window(g,this.__wbg_ptr,t,e,r,i);var c=b().getInt32(g+4*0,!0),d=b().getInt32(g+4*1,!0);return o=c,s=d,k(c,d)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_export_6(o,s,1)}}get pixel_per_pt(){try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const r=_.__wbindgen_add_to_stack_pointer(-16);l(this.__wbg_ptr),_.rendersession_pixel_per_pt(r,this.__wbg_ptr);var t=b().getInt32(r+4*0,!0),e=b().getFloat32(r+4*1,!0);return t===0?void 0:e}finally{_.__wbindgen_add_to_stack_pointer(16)}}set pixel_per_pt(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr),_.rendersession_set_pixel_per_pt(this.__wbg_ptr,t)}get background_color(){try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const r=_.__wbindgen_add_to_stack_pointer(-16);l(this.__wbg_ptr),_.rendersession_background_color(r,this.__wbg_ptr);var t=b().getInt32(r+4*0,!0),e=b().getInt32(r+4*1,!0);let i;return t!==0&&(i=k(t,e).slice(),_.__wbindgen_export_6(t,e*1,1)),i}finally{_.__wbindgen_add_to_stack_pointer(16)}}set background_color(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr);const e=L(t,_.__wbindgen_export_0,_.__wbindgen_export_1),r=M;_.rendersession_set_background_color(this.__wbg_ptr,e,r)}get pages_info(){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr);const t=_.rendersession_pages_info(this.__wbg_ptr);return wt.__wrap(t)}get doc_width(){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");return l(this.__wbg_ptr),_.rendersession_doc_width(this.__wbg_ptr)}get doc_height(){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");return l(this.__wbg_ptr),_.rendersession_doc_height(this.__wbg_ptr)}source_span(t){try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const s=_.__wbindgen_add_to_stack_pointer(-16);l(this.__wbg_ptr);const c=In(t,_.__wbindgen_export_0),d=M;_.rendersession_source_span(s,this.__wbg_ptr,c,d);var e=b().getInt32(s+4*0,!0),r=b().getInt32(s+4*1,!0),i=b().getInt32(s+4*2,!0),o=b().getInt32(s+4*3,!0);if(o)throw R(i);let g;return e!==0&&(g=k(e,r).slice(),_.__wbindgen_export_6(e,r*1,1)),g}finally{_.__wbindgen_add_to_stack_pointer(16)}}}const Gt=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>_.__wbg_rendersessionoptions_free(n>>>0,1));class kn{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,Gt.unregister(this),t}free(){const t=this.__destroy_into_raw();_.__wbg_rendersessionoptions_free(t,0)}constructor(){const t=_.rendersessionoptions_new();return this.__wbg_ptr=t>>>0,Gt.register(this,this.__wbg_ptr,this),this}get pixel_per_pt(){try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const r=_.__wbindgen_add_to_stack_pointer(-16);l(this.__wbg_ptr),_.rendersessionoptions_pixel_per_pt(r,this.__wbg_ptr);var t=b().getInt32(r+4*0,!0),e=b().getFloat32(r+4*1,!0);return t===0?void 0:e}finally{_.__wbindgen_add_to_stack_pointer(16)}}set pixel_per_pt(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr),_.rendersessionoptions_set_pixel_per_pt(this.__wbg_ptr,t)}get background_color(){try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const r=_.__wbindgen_add_to_stack_pointer(-16);l(this.__wbg_ptr),_.rendersessionoptions_background_color(r,this.__wbg_ptr);var t=b().getInt32(r+4*0,!0),e=b().getInt32(r+4*1,!0);let i;return t!==0&&(i=k(t,e).slice(),_.__wbindgen_export_6(t,e*1,1)),i}finally{_.__wbindgen_add_to_stack_pointer(16)}}set background_color(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr);const e=L(t,_.__wbindgen_export_0,_.__wbindgen_export_1),r=M;_.rendersessionoptions_set_background_color(this.__wbg_ptr,e,r)}get format(){try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const r=_.__wbindgen_add_to_stack_pointer(-16);l(this.__wbg_ptr),_.rendersessionoptions_format(r,this.__wbg_ptr);var t=b().getInt32(r+4*0,!0),e=b().getInt32(r+4*1,!0);let i;return t!==0&&(i=k(t,e).slice(),_.__wbindgen_export_6(t,e*1,1)),i}finally{_.__wbindgen_add_to_stack_pointer(16)}}set format(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr);const e=L(t,_.__wbindgen_export_0,_.__wbindgen_export_1),r=M;_.rendersessionoptions_set_format(this.__wbg_ptr,e,r)}}const kt=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>_.__wbg_typstrenderer_free(n>>>0,1));class lt{static __wrap(t){t=t>>>0;const e=Object.create(lt.prototype);return e.__wbg_ptr=t,kt.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,kt.unregister(this),t}free(){const t=this.__destroy_into_raw();_.__wbg_typstrenderer_free(t,0)}render_page_to_canvas(t,e,r){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");if(l(this.__wbg_ptr),U(t,j),t.__wbg_ptr===0)throw new Error("Attempt to use a moved value");let i=0;if(!T(r)){if(U(r,st),r.__wbg_ptr===0)throw new Error("Attempt to use a moved value");i=r.__destroy_into_raw()}const o=_.typstrenderer_render_page_to_canvas(this.__wbg_ptr,t.__wbg_ptr,m(e),i);return R(o)}load_glyph_pack(t){try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const i=_.__wbindgen_add_to_stack_pointer(-16);l(this.__wbg_ptr),_.typstrenderer_load_glyph_pack(i,this.__wbg_ptr,m(t));var e=b().getInt32(i+4*0,!0),r=b().getInt32(i+4*1,!0);if(r)throw R(e)}finally{_.__wbindgen_add_to_stack_pointer(16)}}mount_dom(t,e){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");if(l(this.__wbg_ptr),U(t,j),t.__wbg_ptr===0)throw new Error("Attempt to use a moved value");const r=_.typstrenderer_mount_dom(this.__wbg_ptr,t.__wbg_ptr,m(e));return R(r)}constructor(){const t=_.typstrenderer_new();return this.__wbg_ptr=t>>>0,kt.register(this,this.__wbg_ptr,this),this}create_session(t){try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const o=_.__wbindgen_add_to_stack_pointer(-16);l(this.__wbg_ptr);let s=0;if(!T(t)){if(U(t,le),t.__wbg_ptr===0)throw new Error("Attempt to use a moved value");s=t.__destroy_into_raw()}_.typstrenderer_create_session(o,this.__wbg_ptr,s);var e=b().getInt32(o+4*0,!0),r=b().getInt32(o+4*1,!0),i=b().getInt32(o+4*2,!0);if(i)throw R(r);return j.__wrap(e)}finally{_.__wbindgen_add_to_stack_pointer(16)}}reset(t){try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const i=_.__wbindgen_add_to_stack_pointer(-16);if(l(this.__wbg_ptr),U(t,j),t.__wbg_ptr===0)throw new Error("Attempt to use a moved value");_.typstrenderer_reset(i,this.__wbg_ptr,t.__wbg_ptr);var e=b().getInt32(i+4*0,!0),r=b().getInt32(i+4*1,!0);if(r)throw R(e)}finally{_.__wbindgen_add_to_stack_pointer(16)}}manipulate_data(t,e,r){try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const s=_.__wbindgen_add_to_stack_pointer(-16);if(l(this.__wbg_ptr),U(t,j),t.__wbg_ptr===0)throw new Error("Attempt to use a moved value");const c=L(e,_.__wbindgen_export_0,_.__wbindgen_export_1),d=M,g=gt(r,_.__wbindgen_export_0),w=M;_.typstrenderer_manipulate_data(s,this.__wbg_ptr,t.__wbg_ptr,c,d,g,w);var i=b().getInt32(s+4*0,!0),o=b().getInt32(s+4*1,!0);if(o)throw R(i)}finally{_.__wbindgen_add_to_stack_pointer(16)}}session_from_artifact(t,e){try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const s=_.__wbindgen_add_to_stack_pointer(-16);l(this.__wbg_ptr);const c=gt(t,_.__wbindgen_export_0),d=M,g=L(e,_.__wbindgen_export_0,_.__wbindgen_export_1),w=M;_.typstrenderer_session_from_artifact(s,this.__wbg_ptr,c,d,g,w);var r=b().getInt32(s+4*0,!0),i=b().getInt32(s+4*1,!0),o=b().getInt32(s+4*2,!0);if(o)throw R(i);return j.__wrap(r)}finally{_.__wbindgen_add_to_stack_pointer(16)}}render_svg_diff(t,e,r,i,o){let s,c;try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const w=_.__wbindgen_add_to_stack_pointer(-16);if(l(this.__wbg_ptr),U(t,j),t.__wbg_ptr===0)throw new Error("Attempt to use a moved value");_.typstrenderer_render_svg_diff(w,this.__wbg_ptr,t.__wbg_ptr,e,r,i,o);var d=b().getInt32(w+4*0,!0),g=b().getInt32(w+4*1,!0);return s=d,c=g,k(d,g)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_export_6(s,c,1)}}svg_data(t,e){let r,i;try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const y=_.__wbindgen_add_to_stack_pointer(-16);if(l(this.__wbg_ptr),U(t,j),t.__wbg_ptr===0)throw new Error("Attempt to use a moved value");T(e)||l(e),_.typstrenderer_svg_data(y,this.__wbg_ptr,t.__wbg_ptr,!T(e),T(e)?0:e);var o=b().getInt32(y+4*0,!0),s=b().getInt32(y+4*1,!0),c=b().getInt32(y+4*2,!0),d=b().getInt32(y+4*3,!0),g=o,w=s;if(d)throw g=0,w=0,R(c);return r=g,i=w,k(g,w)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_export_6(r,i,1)}}get_customs(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");if(l(this.__wbg_ptr),U(t,j),t.__wbg_ptr===0)throw new Error("Attempt to use a moved value");const e=_.typstrenderer_get_customs(this.__wbg_ptr,t.__wbg_ptr);return R(e)}render_svg(t,e){try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const s=_.__wbindgen_add_to_stack_pointer(-16);if(l(this.__wbg_ptr),U(t,j),t.__wbg_ptr===0)throw new Error("Attempt to use a moved value");_.typstrenderer_render_svg(s,this.__wbg_ptr,t.__wbg_ptr,m(e));var r=b().getInt32(s+4*0,!0),i=b().getInt32(s+4*1,!0),o=b().getInt32(s+4*2,!0);if(o)throw R(i);return r!==0}finally{_.__wbindgen_add_to_stack_pointer(16)}}create_worker(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr);const e=_.typstrenderer_create_worker(this.__wbg_ptr,m(t));return R(e)}create_worker_bridge(){try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const i=this.__destroy_into_raw(),o=_.__wbindgen_add_to_stack_pointer(-16);l(i),_.typstrenderer_create_worker_bridge(o,i);var t=b().getInt32(o+4*0,!0),e=b().getInt32(o+4*1,!0),r=b().getInt32(o+4*2,!0);if(r)throw R(e);return bt.__wrap(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}}const Xt=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>_.__wbg_typstrendererbuilder_free(n>>>0,1));class En{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,Xt.unregister(this),t}free(){const t=this.__destroy_into_raw();_.__wbg_typstrendererbuilder_free(t,0)}add_glyph_pack(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr);const e=_.typstrendererbuilder_add_glyph_pack(this.__wbg_ptr,m(t));return R(e)}add_raw_font(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr);const e=_.typstrendererbuilder_add_raw_font(this.__wbg_ptr,m(t));return R(e)}add_web_fonts(t){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr);const e=_.typstrendererbuilder_add_web_fonts(this.__wbg_ptr,m(t));return R(e)}constructor(){try{const i=_.__wbindgen_add_to_stack_pointer(-16);_.typstrendererbuilder_new(i);var t=b().getInt32(i+4*0,!0),e=b().getInt32(i+4*1,!0),r=b().getInt32(i+4*2,!0);if(r)throw R(e);return this.__wbg_ptr=t>>>0,Xt.register(this,this.__wbg_ptr,this),this}finally{_.__wbindgen_add_to_stack_pointer(16)}}build(){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const t=this.__destroy_into_raw();l(t);const e=_.typstrendererbuilder_build(t);return R(e)}}const Sn=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>_.__wbg_typstworker_free(n>>>0,1));class Rn{constructor(){throw new Error("cannot invoke `new` directly")}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,Sn.unregister(this),t}free(){const t=this.__destroy_into_raw();_.__wbg_typstworker_free(t,0)}manipulate_data(t,e){try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const s=_.__wbindgen_add_to_stack_pointer(-16);l(this.__wbg_ptr);const c=L(t,_.__wbindgen_export_0,_.__wbindgen_export_1),d=M;_.typstworker_manipulate_data(s,this.__wbg_ptr,c,d,m(e));var r=b().getInt32(s+4*0,!0),i=b().getInt32(s+4*1,!0),o=b().getInt32(s+4*2,!0);if(o)throw R(i);return R(r)}finally{_.__wbindgen_add_to_stack_pointer(16)}}get_pages_info(){if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr);const t=_.typstworker_get_pages_info(this.__wbg_ptr);return R(t)}render_canvas(t,e,r){try{if(this.__wbg_ptr==0)throw new Error("Attempt to use a moved value");const c=_.__wbindgen_add_to_stack_pointer(-16);l(this.__wbg_ptr);const d=gt(t,_.__wbindgen_export_0),g=M,w=zt(e,_.__wbindgen_export_0),y=M,P=zt(r,_.__wbindgen_export_0),C=M;_.typstworker_render_canvas(c,this.__wbg_ptr,d,g,w,y,P,C);var i=b().getInt32(c+4*0,!0),o=b().getInt32(c+4*1,!0),s=b().getInt32(c+4*2,!0);if(s)throw R(o);return R(i)}finally{_.__wbindgen_add_to_stack_pointer(16)}}}const Qt=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>_.__wbg_workerbridge_free(n>>>0,1));class bt{constructor(){throw new Error("cannot invoke `new` directly")}static __wrap(t){t=t>>>0;const e=Object.create(bt.prototype);return e.__wbg_ptr=t,Qt.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,Qt.unregister(this),t}free(){const t=this.__destroy_into_raw();_.__wbg_workerbridge_free(t,0)}}async function Cn(n,t){if(typeof Response=="function"&&n instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(n,t)}catch(r){if(n.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const e=await n.arrayBuffer();return await WebAssembly.instantiate(e,t)}else{const e=await WebAssembly.instantiate(n,t);return e instanceof WebAssembly.Instance?{instance:e,module:n}:e}}function be(){const n={};return n.wbg={},n.wbg.__wbg_typstrenderer_new=function(){return f(function(t){const e=lt.__wrap(t);return m(e)},arguments)},n.wbg.__wbg_call_3bfa248576352471=function(){return I(function(t,e,r){const i=a(t).call(a(e),a(r));return m(i)},arguments)},n.wbg.__wbindgen_object_drop_ref=function(t){R(t)},n.wbg.__wbindgen_object_clone_ref=function(t){const e=a(t);return m(e)},n.wbg.__wbg_incrdomdocclient_new=function(){return f(function(t){const e=ft.__wrap(t);return m(e)},arguments)},n.wbg.__wbindgen_jsval_eq=function(t,e){const r=a(t)===a(e);return F(r),r},n.wbg.__wbg_instanceof_CanvasRenderingContext2d_775df7bd32f07559=function(){return f(function(t){let e;try{e=a(t)instanceof CanvasRenderingContext2D}catch{e=!1}const r=e;return F(r),r},arguments)},n.wbg.__wbg_instanceof_OffscreenCanvasRenderingContext2d_07b9d9deabbab2c4=function(){return f(function(t){let e;try{e=a(t)instanceof OffscreenCanvasRenderingContext2D}catch{e=!1}const r=e;return F(r),r},arguments)},n.wbg.__wbg_new_034f913e7636e987=function(){return f(function(){const t=new Array;return m(t)},arguments)},n.wbg.__wbindgen_string_new=function(t,e){const r=k(t,e);return m(r)},n.wbg.__wbg_set_425e70f7c64ac962=function(){return f(function(t,e,r){a(t)[e>>>0]=R(r)},arguments)},n.wbg.__wbg_new_e69b5f66fda8f13c=function(){return f(function(){const t=new Object;return m(t)},arguments)},n.wbg.__wbg_set_e864d25d9b399c9f=function(){return I(function(t,e,r){const i=Reflect.set(a(t),a(e),a(r));return F(i),i},arguments)},n.wbg.__wbg_remove_d7a18d9f46bc50fd=function(){return f(function(t){a(t).remove()},arguments)},n.wbg.__wbg_new_abda76e883ba8a5f=function(){return f(function(){const t=new Error;return m(t)},arguments)},n.wbg.__wbg_stack_658279fe44541cf6=function(){return f(function(t,e){const r=a(e).stack,i=L(r,_.__wbindgen_export_0,_.__wbindgen_export_1),o=M;b().setInt32(t+4*1,o,!0),b().setInt32(t+4*0,i,!0)},arguments)},n.wbg.__wbg_error_f851667af71bcfc6=function(){return f(function(t,e){let r,i;try{r=t,i=e,console.error(k(t,e))}finally{_.__wbindgen_export_6(r,i,1)}},arguments)},n.wbg.__wbg_self_bf91bf94d9e04084=function(){return I(function(){const t=self.self;return m(t)},arguments)},n.wbg.__wbg_window_52dd9f07d03fd5f8=function(){return I(function(){const t=window.window;return m(t)},arguments)},n.wbg.__wbg_globalThis_05c129bf37fcf1be=function(){return I(function(){const t=globalThis.globalThis;return m(t)},arguments)},n.wbg.__wbg_global_3eca19bb09e9c484=function(){return I(function(){const t=global.global;return m(t)},arguments)},n.wbg.__wbindgen_is_undefined=function(t){const e=a(t)===void 0;return F(e),e},n.wbg.__wbg_newnoargs_1ede4bf2ebbaaf43=function(){return f(function(t,e){const r=new Function(k(t,e));return m(r)},arguments)},n.wbg.__wbg_call_a9ef466721e824f2=function(){return I(function(t,e){const r=a(t).call(a(e));return m(r)},arguments)},n.wbg.__wbg_new_70a2f23d1565c04c=function(){return f(function(t,e){const r=new Error(k(t,e));return m(r)},arguments)},n.wbg.__wbg_new_b1572e0bf16bb8b0=function(){return I(function(t,e){const r=new OffscreenCanvas(t>>>0,e>>>0);return m(r)},arguments)},n.wbg.__wbg_getContext_211e7f0e615215a4=function(){return I(function(t,e,r){const i=a(t).getContext(k(e,r));return T(i)?0:m(i)},arguments)},n.wbg.__wbg_save_51c5c825520e8fd0=function(){return f(function(t){a(t).save()},arguments)},n.wbg.__wbg_setfont_34289a9ff190aed8=function(){return f(function(t,e,r){a(t).font=k(e,r)},arguments)},n.wbg.__wbg_measureText_8547338485b05bb0=function(){return I(function(t,e,r){const i=a(t).measureText(k(e,r));return m(i)},arguments)},n.wbg.__wbg_width_e4c18791794a7c38=function(){return f(function(t){return a(t).width},arguments)},n.wbg.__wbg_restore_cd7f36f354e951db=function(){return f(function(t){a(t).restore()},arguments)},n.wbg.__wbg_push_36cf4d81d7da33d1=function(){return f(function(t,e){const r=a(t).push(a(e));return l(r),r},arguments)},n.wbg.__wbg_settype_623d2ee701e6310a=function(){return f(function(t,e,r){a(t).type=k(e,r)},arguments)},n.wbg.__wbg_newwithu8arraysequenceandoptions_d41c0fdf78490206=function(){return I(function(t,e){const r=new Blob(a(t),a(e));return m(r)},arguments)},n.wbg.__wbg_log_f740dc2253ea759b=function(){return f(function(t){console.log(a(t))},arguments)},n.wbg.__wbg_newwithlength_76462a666eca145f=function(){return f(function(t){const e=new Uint8Array(t>>>0);return m(e)},arguments)},n.wbg.__wbg_length_9254c4bd3b9f23c4=function(){return f(function(t){const e=a(t).length;return l(e),e},arguments)},n.wbg.__wbindgen_memory=function(){const t=_.memory;return m(t)},n.wbg.__wbg_buffer_ccaed51a635d8a2d=function(){return f(function(t){const e=a(t).buffer;return m(e)},arguments)},n.wbg.__wbg_newwithbyteoffsetandlength_7e3eb787208af730=function(){return f(function(t,e,r){const i=new Uint8Array(a(t),e>>>0,r>>>0);return m(i)},arguments)},n.wbg.__wbg_set_ec2fcf81bc573fd9=function(){return f(function(t,e,r){a(t).set(a(e),r>>>0)},arguments)},n.wbg.__wbg_instanceof_Window_6575cd7f1322f82f=function(){return f(function(t){let e;try{e=a(t)instanceof Window}catch{e=!1}const r=e;return F(r),r},arguments)},n.wbg.__wbg_instanceof_WorkerGlobalScope_90a78b9e967b8726=function(){return f(function(t){let e;try{e=a(t)instanceof WorkerGlobalScope}catch{e=!1}const r=e;return F(r),r},arguments)},n.wbg.__wbg_createImageBitmap_7893beeb597d1f1b=function(){return I(function(t,e){const r=a(t).createImageBitmap(a(e));return m(r)},arguments)},n.wbg.__wbg_get_ef828680c64da212=function(){return I(function(t,e){const r=Reflect.get(a(t),a(e));return m(r)},arguments)},n.wbg.__wbindgen_is_function=function(t){const e=typeof a(t)=="function";return F(e),e},n.wbg.__wbg_call_5fb7c8066a4a4825=function(){return I(function(t,e,r,i){const o=a(t).call(a(e),a(r),a(i));return m(o)},arguments)},n.wbg.__wbg_instanceof_Promise_f3fd1bcac3157f0c=function(){return f(function(t){let e;try{e=a(t)instanceof Promise}catch{e=!1}const r=e;return F(r),r},arguments)},n.wbg.__wbg_createImageBitmap_17badae68300b0a6=function(){return I(function(t,e){const r=a(t).createImageBitmap(a(e));return m(r)},arguments)},n.wbg.__wbg_new_1073970097e5a420=function(){return f(function(t,e){try{var r={a:t,b:e},i=(s,c)=>{const d=r.a;r.a=0;try{return yn(d,r.b,s,c)}finally{r.a=d}};const o=new Promise(i);return m(o)}finally{r.a=r.b=0}},arguments)},n.wbg.__wbg_instanceof_ImageBitmap_b77911fe0757088f=function(){return f(function(t){let e;try{e=a(t)instanceof ImageBitmap}catch{e=!1}const r=e;return F(r),r},arguments)},n.wbg.__wbg_instanceof_OffscreenCanvas_ff1551edf0e1303c=function(){return f(function(t){let e;try{e=a(t)instanceof OffscreenCanvas}catch{e=!1}const r=e;return F(r),r},arguments)},n.wbg.__wbindgen_number_new=function(t){return m(t)},n.wbg.__wbg_newwithpathstring_ac464baa5b9a788c=function(){return I(function(t,e){const r=new Path2D(k(t,e));return m(r)},arguments)},n.wbg.__wbg_new_b5bf9532bd5c97fd=function(){return I(function(){const t=new Image;return m(t)},arguments)},n.wbg.__wbg_createObjectURL_11804d71ac214694=function(){return I(function(t,e){const r=URL.createObjectURL(a(e)),i=L(r,_.__wbindgen_export_0,_.__wbindgen_export_1),o=M;b().setInt32(t+4*1,o,!0),b().setInt32(t+4*0,i,!0)},arguments)},n.wbg.__wbg_width_fa277b4243adaabb=function(){return f(function(t){const e=a(t).width;return l(e),e},arguments)},n.wbg.__wbg_height_250d8ced017769f8=function(){return f(function(t){const e=a(t).height;return l(e),e},arguments)},n.wbg.__wbg_drawImage_5c4488af6c903314=function(){return I(function(t,e,r,i){a(t).drawImage(a(e),r,i)},arguments)},n.wbg.__wbg_transferToImageBitmap_a7216e0d45f09601=function(){return I(function(t){const e=a(t).transferToImageBitmap();return m(e)},arguments)},n.wbg.__wbg_setsrc_feb07d9d5b693db7=function(){return f(function(t,e,r){a(t).src=k(e,r)},arguments)},n.wbg.__wbg_setonload_c44788491be30c5c=function(){return f(function(t,e){a(t).onload=a(e)},arguments)},n.wbg.__wbg_setonerror_7e172f547433d10e=function(){return f(function(t,e){a(t).onerror=a(e)},arguments)},n.wbg.__wbg_setTransform_ab9bffd1dfaadef8=function(){return I(function(t,e,r,i,o,s,c){a(t).setTransform(e,r,i,o,s,c)},arguments)},n.wbg.__wbg_putImageData_f9c66228770c0556=function(){return I(function(t,e,r,i){a(t).putImageData(a(e),r,i)},arguments)},n.wbg.__wbg_globalCompositeOperation_7599ad6f23aa7915=function(){return I(function(t,e){const r=a(e).globalCompositeOperation,i=L(r,_.__wbindgen_export_0,_.__wbindgen_export_1),o=M;b().setInt32(t+4*1,o,!0),b().setInt32(t+4*0,i,!0)},arguments)},n.wbg.__wbg_setglobalCompositeOperation_1ec7de7c74b1fffb=function(){return I(function(t,e,r){a(t).globalCompositeOperation=k(e,r)},arguments)},n.wbg.__wbg_setfillStyle_2cc2c748b938a95e=function(){return f(function(t,e,r){a(t).fillStyle=k(e,r)},arguments)},n.wbg.__wbg_fillRect_6784ab0aab9eebd5=function(){return f(function(t,e,r,i,o){a(t).fillRect(e,r,i,o)},arguments)},n.wbg.__wbg_drawImage_007806da723a1e8b=function(){return I(function(t,e,r,i){a(t).drawImage(a(e),r,i)},arguments)},n.wbg.__wbg_clip_6e3594f765ee3015=function(){return f(function(t,e){a(t).clip(a(e))},arguments)},n.wbg.__wbg_setstrokeStyle_3c29a4e85b6087f5=function(){return f(function(t,e,r){a(t).strokeStyle=k(e,r)},arguments)},n.wbg.__wbg_stroke_18a7adc53a38d993=function(){return f(function(t,e){a(t).stroke(a(e))},arguments)},n.wbg.__wbg_drawImage_92c2feb5c6a72619=function(){return I(function(t,e,r,i,o,s){a(t).drawImage(a(e),r,i,o,s)},arguments)},n.wbg.__wbg_drawImage_198159bdfa8bb195=function(){return I(function(t,e,r,i,o,s){a(t).drawImage(a(e),r,i,o,s)},arguments)},n.wbg.__wbg_setlineWidth_267c5e81c3c67348=function(){return f(function(t,e){a(t).lineWidth=e},arguments)},n.wbg.__wbg_setlineCap_46e48efce673b5bc=function(){return f(function(t,e,r){a(t).lineCap=k(e,r)},arguments)},n.wbg.__wbg_setlineJoin_a17a487f4008f18f=function(){return f(function(t,e,r){a(t).lineJoin=k(e,r)},arguments)},n.wbg.__wbg_setmiterLimit_4b85dd19bf9935d5=function(){return f(function(t,e){a(t).miterLimit=e},arguments)},n.wbg.__wbg_setlineDashOffset_4c94a9565370ff7f=function(){return f(function(t,e){a(t).lineDashOffset=e},arguments)},n.wbg.__wbg_restore_53f9e3ba68ab6122=function(){return f(function(t){a(t).restore()},arguments)},n.wbg.__wbg_save_7da51dd755170877=function(){return f(function(t){a(t).save()},arguments)},n.wbg.__wbg_setLineDash_a27082dd66f071a9=function(){return I(function(t,e){a(t).setLineDash(a(e))},arguments)},n.wbg.__wbg_fill_dfa41e6d1844b522=function(){return f(function(t,e){a(t).fill(a(e))},arguments)},n.wbg.__wbg_fill_ab72269002ce7fc4=function(){return f(function(t,e,r){a(t).fill(a(e),Ut[r])},arguments)},n.wbg.__wbg_revokeObjectURL_8e72bad4541bdca0=function(){return I(function(t,e){URL.revokeObjectURL(k(t,e))},arguments)},n.wbg.__wbg_stringify_eead5648c09faaf8=function(){return I(function(t){const e=JSON.stringify(a(t));return m(e)},arguments)},n.wbg.__wbindgen_string_get=function(t,e){const r=a(e),i=typeof r=="string"?r:void 0;var o=T(i)?0:L(i,_.__wbindgen_export_0,_.__wbindgen_export_1),s=M;b().setInt32(t+4*1,s,!0),b().setInt32(t+4*0,o,!0)},n.wbg.__wbindgen_cb_drop=function(t){const e=R(t).original;if(e.cnt--==1)return e.a=0,!0;const r=!1;return F(r),r},n.wbg.__wbg_setTransform_378786ee36ec3a18=function(){return I(function(t,e,r,i,o,s,c){a(t).setTransform(e,r,i,o,s,c)},arguments)},n.wbg.__wbg_putImageData_44bf3a0787b975b7=function(){return I(function(t,e,r,i){a(t).putImageData(a(e),r,i)},arguments)},n.wbg.__wbg_globalCompositeOperation_ce4b579a83346ce3=function(){return I(function(t,e){const r=a(e).globalCompositeOperation,i=L(r,_.__wbindgen_export_0,_.__wbindgen_export_1),o=M;b().setInt32(t+4*1,o,!0),b().setInt32(t+4*0,i,!0)},arguments)},n.wbg.__wbg_setglobalCompositeOperation_904684eaf6e9e441=function(){return I(function(t,e,r){a(t).globalCompositeOperation=k(e,r)},arguments)},n.wbg.__wbg_setfillStyle_f8273bc6290143be=function(){return f(function(t,e,r){a(t).fillStyle=k(e,r)},arguments)},n.wbg.__wbg_fillRect_0a5c5e635be36fc5=function(){return f(function(t,e,r,i,o){a(t).fillRect(e,r,i,o)},arguments)},n.wbg.__wbg_drawImage_cb573ac1888557f6=function(){return I(function(t,e,r,i){a(t).drawImage(a(e),r,i)},arguments)},n.wbg.__wbg_clip_69ebc8c1a170c5e2=function(){return f(function(t,e){a(t).clip(a(e))},arguments)},n.wbg.__wbg_setstrokeStyle_3c3c67fd62a77730=function(){return f(function(t,e,r){a(t).strokeStyle=k(e,r)},arguments)},n.wbg.__wbg_stroke_a76887577bd68088=function(){return f(function(t,e){a(t).stroke(a(e))},arguments)},n.wbg.__wbg_drawImage_79ac57dabab20303=function(){return I(function(t,e,r,i,o,s){a(t).drawImage(a(e),r,i,o,s)},arguments)},n.wbg.__wbg_drawImage_02d5af4f48e0dc26=function(){return I(function(t,e,r,i,o,s){a(t).drawImage(a(e),r,i,o,s)},arguments)},n.wbg.__wbg_setlineWidth_037dd016057a68de=function(){return f(function(t,e){a(t).lineWidth=e},arguments)},n.wbg.__wbg_setlineCap_aa5b25b6af766ba6=function(){return f(function(t,e,r){a(t).lineCap=k(e,r)},arguments)},n.wbg.__wbg_setlineJoin_316d4ae6dc0464ea=function(){return f(function(t,e,r){a(t).lineJoin=k(e,r)},arguments)},n.wbg.__wbg_setmiterLimit_06bd35f2d7370de1=function(){return f(function(t,e){a(t).miterLimit=e},arguments)},n.wbg.__wbg_setlineDashOffset_66ebdfaed783c789=function(){return f(function(t,e){a(t).lineDashOffset=e},arguments)},n.wbg.__wbg_setLineDash_8566a73c937296d9=function(){return I(function(t,e){a(t).setLineDash(a(e))},arguments)},n.wbg.__wbg_fill_35e67b0a78856ae3=function(){return f(function(t,e){a(t).fill(a(e))},arguments)},n.wbg.__wbg_fill_d28a44b2f91d1baf=function(){return f(function(t,e,r){a(t).fill(a(e),Ut[r])},arguments)},n.wbg.__wbg_log_c5235279373186d4=function(){return f(function(t,e){console.log(a(t),a(e))},arguments)},n.wbg.__wbg_replaceWith_abcd4c84c203850c=function(){return I(function(t,e){a(t).replaceWith(a(e))},arguments)},n.wbg.__wbg_firstElementChild_26953b81a3e880c1=function(){return f(function(t){const e=a(t).firstElementChild;return T(e)?0:m(e)},arguments)},n.wbg.__wbg_instanceof_SvgGraphicsElement_aa4a8dae50f94d8e=function(){return f(function(t){let e;try{e=a(t)instanceof SVGGraphicsElement}catch{e=!1}const r=e;return F(r),r},arguments)},n.wbg.__wbg_nextElementSibling_f4a27a6c59d89e33=function(){return f(function(t){const e=a(t).nextElementSibling;return T(e)?0:m(e)},arguments)},n.wbg.__wbg_lastElementChild_ae2f2e9fde5a862e=function(){return f(function(t){const e=a(t).lastElementChild;return T(e)?0:m(e)},arguments)},n.wbg.__wbg_document_d7fa2c739c2b191a=function(){return f(function(t){const e=a(t).document;return T(e)?0:m(e)},arguments)},n.wbg.__wbg_createElement_e4523490bd0ae51d=function(){return I(function(t,e,r){const i=a(t).createElement(k(e,r));return m(i)},arguments)},n.wbg.__wbg_instanceof_HtmlTemplateElement_bdfc6fd7326a5794=function(){return f(function(t){let e;try{e=a(t)instanceof HTMLTemplateElement}catch{e=!1}const r=e;return F(r),r},arguments)},n.wbg.__wbg_cloneNode_bd4b7e47afe3ce9f=function(){return I(function(t){const e=a(t).cloneNode();return m(e)},arguments)},n.wbg.__wbg_instanceof_Element_1a81366cc90e70e2=function(){return f(function(t){let e;try{e=a(t)instanceof Element}catch{e=!1}const r=e;return F(r),r},arguments)},n.wbg.__wbg_setAttribute_2a8f647a8d92c712=function(){return I(function(t,e,r,i,o){a(t).setAttribute(k(e,r),k(i,o))},arguments)},n.wbg.__wbg_style_04eb1488bc2ceffc=function(){return f(function(t){const e=a(t).style;return m(e)},arguments)},n.wbg.__wbg_setProperty_b9a2384cbfb499fb=function(){return I(function(t,e,r,i,o){a(t).setProperty(k(e,r),k(i,o))},arguments)},n.wbg.__wbg_setwidth_23bf2deedd907275=function(){return f(function(t,e){a(t).width=e>>>0},arguments)},n.wbg.__wbg_setheight_239dc283bbe50da4=function(){return f(function(t,e){a(t).height=e>>>0},arguments)},n.wbg.__wbg_setinnerHTML_559d45055154f1d8=function(){return f(function(t,e,r){a(t).innerHTML=k(e,r)},arguments)},n.wbg.__wbg_content_57ec141416462f04=function(){return f(function(t){const e=a(t).content;return m(e)},arguments)},n.wbg.__wbg_firstElementChild_4d48ea0ca6da5169=function(){return f(function(t){const e=a(t).firstElementChild;return T(e)?0:m(e)},arguments)},n.wbg.__wbg_instanceof_HtmlCanvasElement_022ad88c76df9031=function(){return f(function(t){let e;try{e=a(t)instanceof HTMLCanvasElement}catch{e=!1}const r=e;return F(r),r},arguments)},n.wbg.__wbg_instanceof_SvgsvgElement_c57616bdbf67654f=function(){return f(function(t){let e;try{e=a(t)instanceof SVGSVGElement}catch{e=!1}const r=e;return F(r),r},arguments)},n.wbg.__wbg_instanceof_HtmlDivElement_571e59de6195834c=function(){return f(function(t){let e;try{e=a(t)instanceof HTMLDivElement}catch{e=!1}const r=e;return F(r),r},arguments)},n.wbg.__wbg_call_8547f4f9ec48f360=function(){return I(function(t,e,r,i,o){const s=a(t).call(a(e),a(r),a(i),a(o));return m(s)},arguments)},n.wbg.__wbg_appendChild_bc4a0deae90a5164=function(){return I(function(t,e){const r=a(t).appendChild(a(e));return m(r)},arguments)},n.wbg.__wbg_instanceof_HtmlElement_aab18e065dc9207d=function(){return f(function(t){let e;try{e=a(t)instanceof HTMLElement}catch{e=!1}const r=e;return F(r),r},arguments)},n.wbg.__wbg_getContext_bf8985355a4d22ca=function(){return I(function(t,e,r){const i=a(t).getContext(k(e,r));return T(i)?0:m(i)},arguments)},n.wbg.__wbg_clearRect_b31e8293856d6504=function(){return f(function(t,e,r,i,o){a(t).clearRect(e,r,i,o)},arguments)},n.wbg.__wbg_getAttribute_8ac49f4186f4cefd=function(){return f(function(t,e,r,i){const o=a(e).getAttribute(k(r,i));var s=T(o)?0:L(o,_.__wbindgen_export_0,_.__wbindgen_export_1),c=M;b().setInt32(t+4*1,c,!0),b().setInt32(t+4*0,s,!0)},arguments)},n.wbg.__wbg_removeProperty_5acbca68235d0706=function(){return I(function(t,e,r,i){const o=a(e).removeProperty(k(r,i)),s=L(o,_.__wbindgen_export_0,_.__wbindgen_export_1),c=M;b().setInt32(t+4*1,c,!0),b().setInt32(t+4*0,s,!0)},arguments)},n.wbg.__wbg_warn_41503a1c2194de89=function(){return f(function(t){console.warn(a(t))},arguments)},n.wbg.__wbg_new_fec2611eb9180f95=function(){return f(function(t){const e=new Uint8Array(a(t));return m(e)},arguments)},n.wbg.__wbg_clientWidth_600f98ddd2b6cb36=function(){return f(function(t){const e=a(t).clientWidth;return l(e),e},arguments)},n.wbg.__wbg_renderpageimageoptions_unwrap=function(){return f(function(t){const e=st.__unwrap(R(t));return l(e),e},arguments)},n.wbg.__wbindgen_throw=function(t,e){throw new Error(k(t,e))},n.wbg.__wbindgen_debug_string=function(t,e){const r=Mt(a(e)),i=L(r,_.__wbindgen_export_0,_.__wbindgen_export_1),o=M;b().setInt32(t+4*1,o,!0),b().setInt32(t+4*0,i,!0)},n.wbg.__wbg_then_4866a7d9f55d8f3e=function(){return f(function(t,e,r){const i=a(t).then(a(e),a(r));return m(i)},arguments)},n.wbg.__wbg_queueMicrotask_848aa4969108a57e=function(){return f(function(t){const e=a(t).queueMicrotask;return m(e)},arguments)},n.wbg.__wbg_resolve_0aad7c1484731c99=function(){return f(function(t){const e=Promise.resolve(a(t));return m(e)},arguments)},n.wbg.__wbg_then_748f75edfb032440=function(){return f(function(t,e){const r=a(t).then(a(e));return m(r)},arguments)},n.wbg.__wbg_queueMicrotask_c5419c06eab41e73=function(){return f(function(t){queueMicrotask(a(t))},arguments)},n.wbg.__wbindgen_closure_wrapper1673=function(){return f(function(t,e,r){const i=Bt(t,e,201,bn);return m(i)},arguments)},n.wbg.__wbindgen_closure_wrapper1674=function(){return f(function(t,e,r){const i=Bt(t,e,201,pn);return m(i)},arguments)},n.wbg.__wbindgen_closure_wrapper2245=function(){return f(function(t,e,r){const i=hn(t,e,201,mn);return m(i)},arguments)},n}function pe(n,t){return _=n.exports,he.__wbindgen_wasm_module=t,J=null,Z=null,Y=null,_}function An(n){if(_!==void 0)return _;typeof n<"u"&&(Object.getPrototypeOf(n)===Object.prototype?{module:n}=n:console.warn("using deprecated parameters for `initSync()`; pass a single object instead"));const t=be();n instanceof WebAssembly.Module||(n=new WebAssembly.Module(n));const e=new WebAssembly.Instance(n,t);return pe(e,n)}async function he(n){if(_!==void 0)return _;typeof n<"u"&&(Object.getPrototypeOf(n)===Object.prototype?{module_or_path:n}=n:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof n>"u"&&(n=me("typst_ts_renderer_bg.wasm",typeof document>"u"?require("url").pathToFileURL(__filename).href:X&&X.tagName.toUpperCase()==="SCRIPT"&&X.src||new URL("cjs/main.bundle.js",document.baseURI).href));const t=be();(typeof n=="string"||typeof Request=="function"&&n instanceof Request||typeof URL=="function"&&n instanceof URL)&&(n=fetch(n));const{instance:e,module:r}=await Cn(await n,t);return pe(e,r)}let me=async function(n,t){throw new Error("Cannot import wasm module without importer: "+n+" "+t)};function ye(n){me=n}let Mn=async function(n,t){const e=new Function("m","return import(m)"),r=await e("path"),{readFileSync:i}=await e("fs"),o=new URL(r.join(r.dirname(t),n));return await i(o).buffer};const Pn=typeof process<"u"&&process.versions!=null&&process.versions.node!=null;Pn&&ye(Mn);const ve=Object.freeze(Object.defineProperty({__proto__:null,CreateSessionOptions:le,IncrDomDocClient:ft,PageInfo:it,PagesInfo:wt,RenderPageImageOptions:st,RenderSession:j,RenderSessionOptions:kn,TypstRenderer:lt,TypstRendererBuilder:En,TypstWorker:Rn,WorkerBridge:bt,default:he,initSync:An,renderer_build_info:vn,setImportWasmModule:ye},Symbol.toStringTag,{value:"Module"}));let u;const V=new Array(128).fill(void 0);V.push(void 0,null,!0,!1);function p(n){return V[n]}let rt=V.length;function Tn(n){n<132||(V[n]=rt,rt=n)}function S(n){const t=p(n);return Tn(n),t}function v(n){rt===V.length&&V.push(V.length+1);const t=rt;return rt=V[t],V[t]=n,t}function B(n){return n==null}let K=null;function x(){return(K===null||K.buffer.detached===!0||K.buffer.detached===void 0&&K.buffer!==u.memory.buffer)&&(K=new DataView(u.memory.buffer)),K}let A=0,tt=null;function Q(){return(tt===null||tt.byteLength===0)&&(tt=new Uint8Array(u.memory.buffer)),tt}const ct=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},Fn=typeof ct.encodeInto=="function"?function(n,t){return ct.encodeInto(n,t)}:function(n,t){const e=ct.encode(n);return t.set(e),{read:n.length,written:e.length}};function O(n,t,e){if(e===void 0){const c=ct.encode(n),d=t(c.length,1)>>>0;return Q().subarray(d,d+c.length).set(c),A=c.length,d}let r=n.length,i=t(r,1)>>>0;const o=Q();let s=0;for(;s<r;s++){const c=n.charCodeAt(s);if(c>127)break;o[i+s]=c}if(s!==r){s!==0&&(n=n.slice(s)),i=e(i,r,r=s+n.length*3,1)>>>0;const c=Q().subarray(i+s,i+r),d=Fn(n,c);s+=d.written,i=e(i,r,s,1)>>>0}return A=s,i}const xe=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&xe.decode();function N(n,t){return n=n>>>0,xe.decode(Q().subarray(n,n+t))}function Pt(n){const t=typeof n;if(t=="number"||t=="boolean"||n==null)return`${n}`;if(t=="string")return`"${n}"`;if(t=="symbol"){const i=n.description;return i==null?"Symbol":`Symbol(${i})`}if(t=="function"){const i=n.name;return typeof i=="string"&&i.length>0?`Function(${i})`:"Function"}if(Array.isArray(n)){const i=n.length;let o="[";i>0&&(o+=Pt(n[0]));for(let s=1;s<i;s++)o+=", "+Pt(n[s]);return o+="]",o}const e=/\[object ([^\]]+)\]/.exec(toString.call(n));let r;if(e.length>1)r=e[1];else return toString.call(n);if(r=="Object")try{return"Object("+JSON.stringify(n)+")"}catch{return"Object"}return n instanceof Error?`${n.name}: ${n.message}
${n.stack}`:r}const Yt=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>{u.__wbindgen_export_2.get(n.dtor)(n.a,n.b)});function On(n,t,e,r){const i={a:n,b:t,cnt:1,dtor:e},o=(...s)=>{i.cnt++;const c=i.a;i.a=0;try{return r(c,i.b,...s)}finally{--i.cnt===0?(u.__wbindgen_export_2.get(i.dtor)(c,i.b),Yt.unregister(i)):i.a=c}};return o.original=i,Yt.register(o,i,i),o}function Ln(n,t,e){u.__wbindgen_export_3(n,t,v(e))}function q(n,t){try{return n.apply(this,t)}catch(e){u.__wbindgen_export_5(v(e))}}function Dn(n,t,e,r){u.__wbindgen_export_6(n,t,v(e),v(r))}function Ie(n,t){const e=t(n.length*1,1)>>>0;return Q().set(n,e/1),A=n.length,e}function $n(n){const t=u.get_font_info(v(n));return S(t)}function jn(n,t){n=n>>>0;const e=x(),r=[];for(let i=n;i<n+4*t;i+=4)r.push(S(e.getUint32(i,!0)));return r}function _t(n,t){const e=t(n.length*4,4)>>>0,r=x();for(let i=0;i<n.length;i++)r.setUint32(e+4*i,v(n[i]),!0);return A=n.length,e}function Wn(n,t){if(!(n instanceof t))throw new Error(`expected instance of ${t.name}`);return n.ptr}function Bn(n,t){return n=n>>>0,Q().subarray(n/1,n/1+t)}const Zt=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>u.__wbg_incrserver_free(n>>>0,1));class ot{static __wrap(t){t=t>>>0;const e=Object.create(ot.prototype);return e.__wbg_ptr=t,Zt.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,Zt.unregister(this),t}free(){const t=this.__destroy_into_raw();u.__wbg_incrserver_free(t,0)}set_attach_debug_info(t){u.incrserver_set_attach_debug_info(this.__wbg_ptr,t)}current(){try{const r=u.__wbindgen_add_to_stack_pointer(-16);u.incrserver_current(r,this.__wbg_ptr);var t=x().getInt32(r+4*0,!0),e=x().getInt32(r+4*1,!0);let i;return t!==0&&(i=Bn(t,e).slice(),u.__wbindgen_export_4(t,e*1,1)),i}finally{u.__wbindgen_add_to_stack_pointer(16)}}reset(){u.incrserver_reset(this.__wbg_ptr)}}const Et=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>u.__wbg_proxycontext_free(n>>>0,1));class pt{static __wrap(t){t=t>>>0;const e=Object.create(pt.prototype);return e.__wbg_ptr=t,Et.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,Et.unregister(this),t}free(){const t=this.__destroy_into_raw();u.__wbg_proxycontext_free(t,0)}constructor(t){const e=u.proxycontext_new(v(t));return this.__wbg_ptr=e>>>0,Et.register(this,this.__wbg_ptr,this),this}get context(){const t=u.proxycontext_context(this.__wbg_ptr);return S(t)}untar(t,e){try{const o=u.__wbindgen_add_to_stack_pointer(-16),s=Ie(t,u.__wbindgen_export_0),c=A;u.proxycontext_untar(o,this.__wbg_ptr,s,c,v(e));var r=x().getInt32(o+4*0,!0),i=x().getInt32(o+4*1,!0);if(i)throw S(r)}finally{u.__wbindgen_add_to_stack_pointer(16)}}}const te=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>u.__wbg_typstcompiler_free(n>>>0,1));class ht{static __wrap(t){t=t>>>0;const e=Object.create(ht.prototype);return e.__wbg_ptr=t,te.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,te.unregister(this),t}free(){const t=this.__destroy_into_raw();u.__wbg_typstcompiler_free(t,0)}reset(){try{const r=u.__wbindgen_add_to_stack_pointer(-16);u.typstcompiler_reset(r,this.__wbg_ptr);var t=x().getInt32(r+4*0,!0),e=x().getInt32(r+4*1,!0);if(e)throw S(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}set_inputs(t){try{const i=u.__wbindgen_add_to_stack_pointer(-16);u.typstcompiler_set_inputs(i,this.__wbg_ptr,v(t));var e=x().getInt32(i+4*0,!0),r=x().getInt32(i+4*1,!0);if(r)throw S(e)}finally{u.__wbindgen_add_to_stack_pointer(16)}}add_source(t,e){const r=O(t,u.__wbindgen_export_0,u.__wbindgen_export_1),i=A,o=O(e,u.__wbindgen_export_0,u.__wbindgen_export_1),s=A;return u.typstcompiler_add_source(this.__wbg_ptr,r,i,o,s)!==0}map_shadow(t,e){const r=O(t,u.__wbindgen_export_0,u.__wbindgen_export_1),i=A,o=Ie(e,u.__wbindgen_export_0),s=A;return u.typstcompiler_add_source(this.__wbg_ptr,r,i,o,s)!==0}unmap_shadow(t){const e=O(t,u.__wbindgen_export_0,u.__wbindgen_export_1),r=A;return u.typstcompiler_unmap_shadow(this.__wbg_ptr,e,r)!==0}reset_shadow(){u.typstcompiler_reset_shadow(this.__wbg_ptr)}get_loaded_fonts(){try{const i=u.__wbindgen_add_to_stack_pointer(-16);u.typstcompiler_get_loaded_fonts(i,this.__wbg_ptr);var t=x().getInt32(i+4*0,!0),e=x().getInt32(i+4*1,!0),r=jn(t,e).slice();return u.__wbindgen_export_4(t,e*4,4),r}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_ast(t){let e,r;try{const w=u.__wbindgen_add_to_stack_pointer(-16),y=O(t,u.__wbindgen_export_0,u.__wbindgen_export_1),P=A;u.typstcompiler_get_ast(w,this.__wbg_ptr,y,P);var i=x().getInt32(w+4*0,!0),o=x().getInt32(w+4*1,!0),s=x().getInt32(w+4*2,!0),c=x().getInt32(w+4*3,!0),d=i,g=o;if(c)throw d=0,g=0,S(s);return e=d,r=g,N(d,g)}finally{u.__wbindgen_add_to_stack_pointer(16),u.__wbindgen_export_4(e,r,1)}}get_semantic_token_legend(){try{const i=u.__wbindgen_add_to_stack_pointer(-16);u.typstcompiler_get_semantic_token_legend(i,this.__wbg_ptr);var t=x().getInt32(i+4*0,!0),e=x().getInt32(i+4*1,!0),r=x().getInt32(i+4*2,!0);if(r)throw S(e);return S(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_semantic_tokens(t,e,r){try{const y=u.__wbindgen_add_to_stack_pointer(-16),P=O(t,u.__wbindgen_export_0,u.__wbindgen_export_1),C=A;var i=B(e)?0:O(e,u.__wbindgen_export_0,u.__wbindgen_export_1),o=A,s=B(r)?0:O(r,u.__wbindgen_export_0,u.__wbindgen_export_1),c=A;u.typstcompiler_get_semantic_tokens(y,this.__wbg_ptr,P,C,i,o,s,c);var d=x().getInt32(y+4*0,!0),g=x().getInt32(y+4*1,!0),w=x().getInt32(y+4*2,!0);if(w)throw S(g);return S(d)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_artifact(t,e){try{const s=u.__wbindgen_add_to_stack_pointer(-16),c=O(t,u.__wbindgen_export_0,u.__wbindgen_export_1),d=A;u.typstcompiler_get_artifact(s,this.__wbg_ptr,c,d,e);var r=x().getInt32(s+4*0,!0),i=x().getInt32(s+4*1,!0),o=x().getInt32(s+4*2,!0);if(o)throw S(i);return S(r)}finally{u.__wbindgen_add_to_stack_pointer(16)}}set_compiler_options(t,e){try{const c=u.__wbindgen_add_to_stack_pointer(-16),d=O(t,u.__wbindgen_export_0,u.__wbindgen_export_1),g=A;var r=B(e)?0:_t(e,u.__wbindgen_export_0),i=A;u.typstcompiler_set_compiler_options(c,this.__wbg_ptr,d,g,r,i);var o=x().getInt32(c+4*0,!0),s=x().getInt32(c+4*1,!0);if(s)throw S(o)}finally{u.__wbindgen_add_to_stack_pointer(16)}}query(t,e,r,i){let o,s;try{const $=u.__wbindgen_add_to_stack_pointer(-16),Me=O(t,u.__wbindgen_export_0,u.__wbindgen_export_1),Pe=A;var c=B(e)?0:_t(e,u.__wbindgen_export_0),d=A;const Te=O(r,u.__wbindgen_export_0,u.__wbindgen_export_1),Fe=A;var g=B(i)?0:O(i,u.__wbindgen_export_0,u.__wbindgen_export_1),w=A;u.typstcompiler_query($,this.__wbg_ptr,Me,Pe,c,d,Te,Fe,g,w);var y=x().getInt32($+4*0,!0),P=x().getInt32($+4*1,!0),C=x().getInt32($+4*2,!0),W=x().getInt32($+4*3,!0),D=y,z=P;if(W)throw D=0,z=0,S(C);return o=D,s=z,N(D,z)}finally{u.__wbindgen_add_to_stack_pointer(16),u.__wbindgen_export_4(o,s,1)}}compile(t,e,r,i){try{const w=u.__wbindgen_add_to_stack_pointer(-16),y=O(t,u.__wbindgen_export_0,u.__wbindgen_export_1),P=A;var o=B(e)?0:_t(e,u.__wbindgen_export_0),s=A;const C=O(r,u.__wbindgen_export_0,u.__wbindgen_export_1),W=A;u.typstcompiler_compile(w,this.__wbg_ptr,y,P,o,s,C,W,i);var c=x().getInt32(w+4*0,!0),d=x().getInt32(w+4*1,!0),g=x().getInt32(w+4*2,!0);if(g)throw S(d);return S(c)}finally{u.__wbindgen_add_to_stack_pointer(16)}}create_incr_server(){try{const i=u.__wbindgen_add_to_stack_pointer(-16);u.typstcompiler_create_incr_server(i,this.__wbg_ptr);var t=x().getInt32(i+4*0,!0),e=x().getInt32(i+4*1,!0),r=x().getInt32(i+4*2,!0);if(r)throw S(e);return ot.__wrap(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}incr_compile(t,e,r,i){try{const w=u.__wbindgen_add_to_stack_pointer(-16),y=O(t,u.__wbindgen_export_0,u.__wbindgen_export_1),P=A;var o=B(e)?0:_t(e,u.__wbindgen_export_0),s=A;Wn(r,ot),u.typstcompiler_incr_compile(w,this.__wbg_ptr,y,P,o,s,r.__wbg_ptr,i);var c=x().getInt32(w+4*0,!0),d=x().getInt32(w+4*1,!0),g=x().getInt32(w+4*2,!0);if(g)throw S(d);return S(c)}finally{u.__wbindgen_add_to_stack_pointer(16)}}}const ee=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>u.__wbg_typstcompilerbuilder_free(n>>>0,1));class zn{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,ee.unregister(this),t}free(){const t=this.__destroy_into_raw();u.__wbg_typstcompilerbuilder_free(t,0)}constructor(){try{const i=u.__wbindgen_add_to_stack_pointer(-16);u.typstcompilerbuilder_new(i);var t=x().getInt32(i+4*0,!0),e=x().getInt32(i+4*1,!0),r=x().getInt32(i+4*2,!0);if(r)throw S(e);return this.__wbg_ptr=t>>>0,ee.register(this,this.__wbg_ptr,this),this}finally{u.__wbindgen_add_to_stack_pointer(16)}}set_dummy_access_model(){try{const r=u.__wbindgen_add_to_stack_pointer(-16);u.typstcompilerbuilder_set_dummy_access_model(r,this.__wbg_ptr);var t=x().getInt32(r+4*0,!0),e=x().getInt32(r+4*1,!0);if(e)throw S(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}set_access_model(t,e,r,i,o){const s=u.typstcompilerbuilder_set_access_model(this.__wbg_ptr,v(t),v(e),v(r),v(i),v(o));return S(s)}set_package_registry(t,e){const r=u.typstcompilerbuilder_set_package_registry(this.__wbg_ptr,v(t),v(e));return S(r)}add_raw_font(t){const e=u.typstcompilerbuilder_add_raw_font(this.__wbg_ptr,v(t));return S(e)}add_web_fonts(t){const e=u.typstcompilerbuilder_add_web_fonts(this.__wbg_ptr,v(t));return S(e)}add_glyph_pack(t){const e=u.typstcompilerbuilder_add_glyph_pack(this.__wbg_ptr,v(t));return S(e)}build(){const t=this.__destroy_into_raw(),e=u.typstcompilerbuilder_build(t);return S(e)}}async function Un(n,t){if(typeof Response=="function"&&n instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(n,t)}catch(r){if(n.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const e=await n.arrayBuffer();return await WebAssembly.instantiate(e,t)}else{const e=await WebAssembly.instantiate(n,t);return e instanceof WebAssembly.Instance?{instance:e,module:n}:e}}function ke(){const n={};return n.wbg={},n.wbg.__wbindgen_object_drop_ref=function(t){S(t)},n.wbg.__wbg_new_abda76e883ba8a5f=function(){const t=new Error;return v(t)},n.wbg.__wbg_stack_658279fe44541cf6=function(t,e){const r=p(e).stack,i=O(r,u.__wbindgen_export_0,u.__wbindgen_export_1),o=A;x().setInt32(t+4*1,o,!0),x().setInt32(t+4*0,i,!0)},n.wbg.__wbg_error_f851667af71bcfc6=function(t,e){let r,i;try{r=t,i=e,console.error(N(t,e))}finally{u.__wbindgen_export_4(r,i,1)}},n.wbg.__wbg_iterator_695d699a44d6234c=function(){return v(Symbol.iterator)},n.wbg.__wbg_get_ef828680c64da212=function(){return q(function(t,e){const r=Reflect.get(p(t),p(e));return v(r)},arguments)},n.wbg.__wbindgen_is_function=function(t){return typeof p(t)=="function"},n.wbg.__wbg_call_a9ef466721e824f2=function(){return q(function(t,e){const r=p(t).call(p(e));return v(r)},arguments)},n.wbg.__wbindgen_is_object=function(t){const e=p(t);return typeof e=="object"&&e!==null},n.wbg.__wbg_next_13b477da1eaa3897=function(t){const e=p(t).next;return v(e)},n.wbg.__wbg_length_9254c4bd3b9f23c4=function(t){return p(t).length},n.wbg.__wbindgen_memory=function(){const t=u.memory;return v(t)},n.wbg.__wbg_buffer_ccaed51a635d8a2d=function(t){const e=p(t).buffer;return v(e)},n.wbg.__wbg_new_fec2611eb9180f95=function(t){const e=new Uint8Array(p(t));return v(e)},n.wbg.__wbg_set_ec2fcf81bc573fd9=function(t,e,r){p(t).set(p(e),r>>>0)},n.wbg.__wbg_self_bf91bf94d9e04084=function(){return q(function(){const t=self.self;return v(t)},arguments)},n.wbg.__wbg_window_52dd9f07d03fd5f8=function(){return q(function(){const t=window.window;return v(t)},arguments)},n.wbg.__wbg_globalThis_05c129bf37fcf1be=function(){return q(function(){const t=globalThis.globalThis;return v(t)},arguments)},n.wbg.__wbg_global_3eca19bb09e9c484=function(){return q(function(){const t=global.global;return v(t)},arguments)},n.wbg.__wbindgen_is_undefined=function(t){return p(t)===void 0},n.wbg.__wbg_newnoargs_1ede4bf2ebbaaf43=function(t,e){const r=new Function(N(t,e));return v(r)},n.wbg.__wbg_new_70a2f23d1565c04c=function(t,e){const r=new Error(N(t,e));return v(r)},n.wbg.__wbindgen_jsval_loose_eq=function(t,e){return p(t)==p(e)},n.wbg.__wbindgen_boolean_get=function(t){const e=p(t);return typeof e=="boolean"?e?1:0:2},n.wbg.__wbindgen_is_bigint=function(t){return typeof p(t)=="bigint"},n.wbg.__wbindgen_number_get=function(t,e){const r=p(e),i=typeof r=="number"?r:void 0;x().setFloat64(t+8*1,B(i)?0:i,!0),x().setInt32(t+4*0,!B(i),!0)},n.wbg.__wbindgen_string_get=function(t,e){const r=p(e),i=typeof r=="string"?r:void 0;var o=B(i)?0:O(i,u.__wbindgen_export_0,u.__wbindgen_export_1),s=A;x().setInt32(t+4*1,s,!0),x().setInt32(t+4*0,o,!0)},n.wbg.__wbg_isArray_6f3b47f09adb61b5=function(t){return Array.isArray(p(t))},n.wbg.__wbindgen_in=function(t,e){return p(t)in p(e)},n.wbg.__wbg_instanceof_Map_f96986929e7e89ed=function(t){let e;try{e=p(t)instanceof Map}catch{e=!1}return e},n.wbg.__wbg_isSafeInteger_b9dff570f01a9100=function(t){return Number.isSafeInteger(p(t))},n.wbg.__wbindgen_bigint_get_as_i64=function(t,e){const r=p(e),i=typeof r=="bigint"?r:void 0;x().setBigInt64(t+8*1,B(i)?BigInt(0):i,!0),x().setInt32(t+4*0,!B(i),!0)},n.wbg.__wbindgen_bigint_from_i64=function(t){return v(t)},n.wbg.__wbindgen_jsval_eq=function(t,e){return p(t)===p(e)},n.wbg.__wbindgen_bigint_from_u64=function(t){const e=BigInt.asUintN(64,t);return v(e)},n.wbg.__wbindgen_error_new=function(t,e){const r=new Error(N(t,e));return v(r)},n.wbg.__wbindgen_object_clone_ref=function(t){const e=p(t);return v(e)},n.wbg.__wbindgen_string_new=function(t,e){const r=N(t,e);return v(r)},n.wbg.__wbg_newwithbyteoffsetandlength_7e3eb787208af730=function(t,e,r){const i=new Uint8Array(p(t),e>>>0,r>>>0);return v(i)},n.wbg.__wbindgen_number_new=function(t){return v(t)},n.wbg.__wbg_call_8547f4f9ec48f360=function(){return q(function(t,e,r,i,o){const s=p(t).call(p(e),p(r),p(i),p(o));return v(s)},arguments)},n.wbg.__wbg_next_b06e115d1b01e10b=function(){return q(function(t){const e=p(t).next();return v(e)},arguments)},n.wbg.__wbg_done_983b5ffcaec8c583=function(t){return p(t).done},n.wbg.__wbg_value_2ab8a198c834c26a=function(t){const e=p(t).value;return v(e)},n.wbg.__wbg_get_5419cf6b954aa11d=function(t,e){const r=p(t)[e>>>0];return v(r)},n.wbg.__wbg_entries_c02034de337d3ee2=function(t){const e=Object.entries(p(t));return v(e)},n.wbg.__wbg_length_f217bbbf7e8e4df4=function(t){return p(t).length},n.wbg.__wbg_getwithrefkey_edc2c8960f0f1191=function(t,e){const r=p(t)[p(e)];return v(r)},n.wbg.__wbindgen_is_string=function(t){return typeof p(t)=="string"},n.wbg.__wbindgen_as_number=function(t){return+p(t)},n.wbg.__wbg_instanceof_Object_4bbac482eda9b711=function(t){let e;try{e=p(t)instanceof Object}catch{e=!1}return e},n.wbg.__wbg_log_a0e624261f3b0108=function(t,e,r){console.log(p(t),p(e),p(r))},n.wbg.__wbg_call_3bfa248576352471=function(){return q(function(t,e,r){const i=p(t).call(p(e),p(r));return v(i)},arguments)},n.wbg.__wbg_instanceof_ArrayBuffer_74945570b4a62ec7=function(t){let e;try{e=p(t)instanceof ArrayBuffer}catch{e=!1}return e},n.wbg.__wbg_instanceof_Uint8Array_df0761410414ef36=function(t){let e;try{e=p(t)instanceof Uint8Array}catch{e=!1}return e},n.wbg.__wbg_new_e69b5f66fda8f13c=function(){const t=new Object;return v(t)},n.wbg.__wbg_new_034f913e7636e987=function(){const t=new Array;return v(t)},n.wbg.__wbg_set_f975102236d3c502=function(t,e,r){p(t)[S(e)]=S(r)},n.wbg.__wbg_set_425e70f7c64ac962=function(t,e,r){p(t)[e>>>0]=S(r)},n.wbg.__wbg_now_70af4fe37a792251=function(){return Date.now()},n.wbg.__wbg_newwithbyteoffsetandlength_5f67057565ba35bf=function(t,e,r){const i=new Uint32Array(p(t),e>>>0,r>>>0);return v(i)},n.wbg.__wbg_new_f72bacad1bb22b64=function(t){const e=new Uint32Array(p(t));return v(e)},n.wbg.__wbg_set_e864d25d9b399c9f=function(){return q(function(t,e,r){return Reflect.set(p(t),p(e),p(r))},arguments)},n.wbg.__wbg_push_36cf4d81d7da33d1=function(t,e){return p(t).push(p(e))},n.wbg.__wbg_proxycontext_new=function(t){const e=pt.__wrap(t);return v(e)},n.wbg.__wbg_newwithargs_54f5f31ff1323eb2=function(t,e,r,i){const o=new Function(N(t,e),N(r,i));return v(o)},n.wbg.__wbg_new_1073970097e5a420=function(t,e){try{var r={a:t,b:e},i=(s,c)=>{const d=r.a;r.a=0;try{return Dn(d,r.b,s,c)}finally{r.a=d}};const o=new Promise(i);return v(o)}finally{r.a=r.b=0}},n.wbg.__wbg_typstcompiler_new=function(t){const e=ht.__wrap(t);return v(e)},n.wbg.__wbg_error_428a497903e96efa=function(t,e,r){console.error(p(t),p(e),p(r))},n.wbg.__wbindgen_throw=function(t,e){throw new Error(N(t,e))},n.wbg.__wbindgen_debug_string=function(t,e){const r=Pt(p(e)),i=O(r,u.__wbindgen_export_0,u.__wbindgen_export_1),o=A;x().setInt32(t+4*1,o,!0),x().setInt32(t+4*0,i,!0)},n.wbg.__wbg_queueMicrotask_848aa4969108a57e=function(t){const e=p(t).queueMicrotask;return v(e)},n.wbg.__wbg_resolve_0aad7c1484731c99=function(t){const e=Promise.resolve(p(t));return v(e)},n.wbg.__wbindgen_cb_drop=function(t){const e=S(t).original;return e.cnt--==1?(e.a=0,!0):!1},n.wbg.__wbg_then_748f75edfb032440=function(t,e){const r=p(t).then(p(e));return v(r)},n.wbg.__wbg_queueMicrotask_c5419c06eab41e73=function(t){queueMicrotask(p(t))},n.wbg.__wbindgen_closure_wrapper15132=function(t,e,r){const i=On(t,e,1488,Ln);return v(i)},n}function Ee(n,t){return u=n.exports,Se.__wbindgen_wasm_module=t,K=null,tt=null,u}function qn(n){if(u!==void 0)return u;typeof n<"u"&&(Object.getPrototypeOf(n)===Object.prototype?{module:n}=n:console.warn("using deprecated parameters for `initSync()`; pass a single object instead"));const t=ke();n instanceof WebAssembly.Module||(n=new WebAssembly.Module(n));const e=new WebAssembly.Instance(n,t);return Ee(e,n)}async function Se(n){if(u!==void 0)return u;typeof n<"u"&&(Object.getPrototypeOf(n)===Object.prototype?{module_or_path:n}=n:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof n>"u"&&(n=Re("typst_ts_web_compiler_bg.wasm",typeof document>"u"?require("url").pathToFileURL(__filename).href:X&&X.tagName.toUpperCase()==="SCRIPT"&&X.src||new URL("cjs/main.bundle.js",document.baseURI).href));const t=ke();(typeof n=="string"||typeof Request=="function"&&n instanceof Request||typeof URL=="function"&&n instanceof URL)&&(n=fetch(n));const{instance:e,module:r}=await Un(await n,t);return Ee(e,r)}let Re=async function(n,t){throw new Error("Cannot import wasm module without importer: "+n+" "+t)};function Ce(n){Re=n}let Nn=async function(n,t){const e=new Function("m","return import(m)"),r=await e("path"),{readFileSync:i}=await e("fs"),o=new URL(r.join(r.dirname(t),n));return await i(o).buffer};const Hn=typeof process<"u"&&process.versions!=null&&process.versions.node!=null;Hn&&Ce(Nn);const Ae=Object.freeze(Object.defineProperty({__proto__:null,IncrServer:ot,ProxyContext:pt,TypstCompiler:ht,TypstCompilerBuilder:zn,default:Se,get_font_info:$n,initSync:qn,setImportWasmModule:Ce},Symbol.toStringTag,{value:"Module"}));exports.FetchAccessModel=ge;exports.FetchPackageRegistry=fe;exports.createTypstCompiler=de;exports.createTypstRenderer=At;exports.createTypstSvgRenderer=an;exports.preloadRemoteFonts=ut;exports.preloadSystemFonts=St;exports.rendererBuildInfo=cn;
